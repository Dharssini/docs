<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="The OpenFn Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="The OpenFn Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="The OpenFn Blog JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFLLYHHM0C"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TFLLYHHM0C",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="OpenFn/docs" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/articles/rss.xml" title="OpenFn Help Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/articles/atom.xml" title="OpenFn Help Articles Atom Feed">
<link rel="alternate" type="application/json" href="/articles/feed.json" title="OpenFn Help Articles JSON Feed">
<script data-jsd-embedded data-key="8583229a-a951-405e-b269-25a100d04641" data-base-url="https://jsd-widget.atlassian.com" src="https://jsd-widget.atlassian.com/assets/embed.js" async></script><title data-react-helmet="true">Sync Like You Mean It: Thinking Through System “Syncing” Protocols | OpenFn/docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.openfn.org/articles/2021/02/17/syncing-options"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Sync Like You Mean It: Thinking Through System “Syncing” Protocols | OpenFn/docs"><meta data-react-helmet="true" name="description" content="“Syncing” is getting two systems to a state of harmony. This might mean keeping"><meta data-react-helmet="true" property="og:description" content="“Syncing” is getting two systems to a state of harmony. This might mean keeping"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-02-17T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/jedbgold"><meta data-react-helmet="true" property="article:tag" content="how-to,tips"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.openfn.org/articles/2021/02/17/syncing-options"><link data-react-helmet="true" rel="alternate" href="https://docs.openfn.org/articles/2021/02/17/syncing-options" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.openfn.org/fr/articles/2021/02/17/syncing-options" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.openfn.org/articles/2021/02/17/syncing-options" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://O729P2PJGT-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4494c62d.css">
<link rel="preload" href="/assets/js/runtime~main.49a59a2e.js" as="script">
<link rel="preload" href="/assets/js/main.60c31cd7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="OpenFn" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="OpenFn" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">OpenFn</b></a><a class="navbar__item navbar__link" href="/documentation/">Docs</a><a class="navbar__item navbar__link" href="/library">Library</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/articles">Articles</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/articles/2021/02/17/syncing-options" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/fr/articles/2021/02/17/syncing-options" target="_self" rel="noopener noreferrer" class="dropdown__link">Français</a></li></ul></div><a href="https://github.com/openfn/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Kl_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/articles/2021/10/22/testing-react-app-with-jest-hound">Testing a React app, the blurred line between Unit, integration and E2E</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/articles/2021/10/08/improving-multistage-docker-builds-using-buildx">Improving Multistage Docker Builds using Buildx</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/articles/2021/07/05/wrapping-my-head-around-jobs">Wrapping my head around jobs</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/articles/2021/05/24/commcare-events">Forms and Cases: CommCare and event-based integration</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/articles/2021/02/17/syncing-options">Sync Like You Mean It: Thinking Through System “Syncing” Protocols</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/articles/2021/02/03/hosted-or-local-deployment">Our Servers or Yours: Thinking through deployment options</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article><header><h1 class="margin-bottom--sm blogPostTitle_nmLu">Sync Like You Mean It: Thinking Through System “Syncing” Protocols</h1><div class="margin-vert--md"><time datetime="2021-02-17T00:00:00.000Z" class="blogPostDate_3tMv">February<!-- --> <!-- -->17<!-- -->, <!-- -->2021<!-- --> <!-- --> · <!-- -->4<!-- --> min read</time></div><div class="avatar margin-vert--md"><div style="position:relative;height:45px;width:53px"><img class="blogPostAvatar_1SuQ" style="z-index:1000;margin-left:0px" src="https://avatars.githubusercontent.com/jedbgold" alt="Jed Goldstein"></div><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/jedbgold" target="_blank" rel="noreferrer noopener">Jed Goldstein</a></h4></div></div></header><section class="markdown"><p>“Syncing” is getting two systems to a state of harmony. This might mean keeping
a list of patients up to date, though modifications can be made in either
system. It might mean copying transactions from one system to another on a
nightly basis. It might mean a lot of things, but the key concept is that when
you sync systems, you’re asking them to work together while simultaneously
respecting both software systems’ independence.</p><p>In this post we’ll discuss two different syncing protocols to consider when
designing your data integration. These include:</p><ol><li><strong>Real-time, or event-based, syncs</strong></li><li><strong>Scheduled syncs</strong></li></ol><p>For a
<a href="https://docs.openfn.org/blog/2021/02/09/interoperability_for_case_referrals" target="_blank" rel="noopener noreferrer">recent project in Cambodia</a>,
OpenFn is being used by social workers to automate case referrals between the
software systems Primero and OSCaR. In the design phase, we evaluated these two
syncing options. Below, we&#x27;ll explain what each one is, the differences between
them and which option we chose in the end.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="real-timeevent-based-syncs">Real Time/Event Based Syncs<a class="hash-link" href="#real-timeevent-based-syncs" title="Direct link to heading">​</a></h3><p>The first option considered for this integration was the real-time/event based
sync. This type of sync is triggered whenever a specified event takes place in a
system. With this approach, whenever a case is referred in Primero (via the user
interface, i.e., when a real case-worker clicks the “refer” button) OpenFn
receives a small payload with case data and transmits it to OSCaR and vice
versa.</p><p><img alt="Real_Time_Sync" src="/assets/images/syncs1-ed8efbe5bdd76218c43fc801bcf76516.png"></p><p>Because of their instantaneous nature, real time/event based syncs are great for
integrations that involve mobile payments or sms messages to recipients. Really,
anything that needs to be done “now”! Additionally, depending on your data
volumes real time syncs might save you money because you’re only using resources
when specific events take place. For instance, in the above example, a run is
triggered by a referral, so if there are only 10 case referrals/month, you&#x27;d
only process 10 runs each month.</p><p>This type of sync is great because it’s instantaneous, typically quite
straightforward to set up, doesn’t require any “state mangagement” on OpenFn,
and allows for the reprocessing of individual events. There are, however,
drawbacks.</p><p>For instance, what happens if the app that’s sending notifications to OpenFn
fails to send? What if AWS or GCP goes down, taking half of the internet with
it? If Primero “thinks” it sent the referral, OpenFn never receives it, that
case might not get referred to Oscar!</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="scheduled-syncs">Scheduled Syncs<a class="hash-link" href="#scheduled-syncs" title="Direct link to heading">​</a></h3><p><img alt="Schedule_Dependent_Sync" src="/assets/images/syncs2-b82b2585d36f4b7bb128dc2cae15fc7b.png"></p><p>The second option considered, a bi-directional schedule dependent sync, solves
for the issue discussed above. On a scheduled basis (every 5 minutes, for
example) OpenFn checks with Primero and Oscar to see if case referrals need to
be transmitted between the two systems and then refers the case if required. In
the unlikely event that any of the software systems involved crash, the
stability provided by the bi-directional sync means that all data is preserved
and eventually makes it to its destination safely.</p><p>The major drawback here is complexity. We had to use 4 jobs instead of 2, and
the job that is responsible for “pulling” data that’s been updated since the
time of the last successful sync has to keep “state”—or some sort of working
memory of what it’s done in the past. When pulling modified cases from Primero,
OpenFn now only pulls cases modified on or after <code>YYYY-MM-DD HH:MM:SS</code> where
<code>YYYY-MM-DD HH:MM:SS</code> is the time of the last successful, round-trip
synchronization. OpenFn has built-in functionality to handle exactly this
requirement, but not all ETL systems do and it’s a design implication that must
be considered.</p><p>Ultimately, for the project in Cambodia, we decided that this sync option is the
right choice because data integrity is more important than the speed of this
data flow. That’s a crucial point to understand—the organizations operating in
Cambodia decided that for this particular use case, being able to guarantee
eventual syncing was more important than having real-time syncing.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="both-sync-options-have-their-pros-and-cons">Both Sync Options Have Their Pros and Cons<a class="hash-link" href="#both-sync-options-have-their-pros-and-cons" title="Direct link to heading">​</a></h3><p>Both options definitely have their use-cases and OpenFn&#x27;s platform versatility
enables your team to decide which type of sync is right for your project.</p><p>As always, we are here to help with any questions as you think through which
sync option makes the most sense for your project.</p></section><footer class="row margin-vert--md"><div class="col" style="margin-top:-10px"><a class="blogPostTag_36QG" href="/articles/tags/how-to">how-to</a><a class="blogPostTag_36QG" href="/articles/tags/tips">tips</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/articles/2021/05/24/commcare-events"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« <!-- -->Forms and Cases: CommCare and event-based integration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/articles/2021/02/03/hosted-or-local-deployment"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Our Servers or Yours: Thinking through deployment options<!-- --> »</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#real-timeevent-based-syncs" class="table-of-contents__link toc-highlight">Real Time/Event Based Syncs</a></li><li><a href="#scheduled-syncs" class="table-of-contents__link toc-highlight">Scheduled Syncs</a></li><li><a href="#both-sync-options-have-their-pros-and-cons" class="table-of-contents__link toc-highlight">Both Sync Options Have Their Pros and Cons</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">This Site</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/library">Library</a></li><li class="footer__item"><a class="footer__link-item" href="/articles">Articles</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://community.openfn.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.openfn.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenFn.org</a></li><li class="footer__item"><a href="https://github.com/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Open Function Group LLC</div></div></div></footer></div>
<script src="/assets/js/runtime~main.49a59a2e.js"></script>
<script src="/assets/js/main.60c31cd7.js"></script>
</body>
</html>