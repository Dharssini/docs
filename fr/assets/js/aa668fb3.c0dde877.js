"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[1922],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=r.createContext({}),l=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=l(t),m=o,v=d["".concat(u,".").concat(m)]||d[m]||c[m]||a;return t?r.createElement(v,s(s({ref:n},p),{},{components:t})):r.createElement(v,s({ref:n},p))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=d;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var l=2;l<a;l++)s[l]=t[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},27458:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return i},metadata:function(){return u},toc:function(){return l},default:function(){return c}});var r=t(87462),o=t(63366),a=(t(67294),t(3905)),s={title:"Inbox",sidebar_label:"Votre Inbox"},i=void 0,u={unversionedId:"build/inbox",id:"build/inbox",isDocsHomePage:!1,title:"Inbox",description:"Comment \xe7a marche",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/build/inbox.md",sourceDirName:"build",slug:"/build/inbox",permalink:"/fr/documentation/build/inbox",editUrl:"https://github.com/openfn/docs/edit/main/docs/build/inbox.md",tags:[],version:"current",frontMatter:{title:"Inbox",sidebar_label:"Votre Inbox"},sidebar:"docs",previous:{title:"Credentials",permalink:"/fr/documentation/build/credentials"},next:{title:"Sources g\xe9n\xe9riques",permalink:"/fr/documentation/source-apps"}},l=[{value:"Comment \xe7a marche",id:"comment-\xe7a-marche",children:[]},{value:"<code>202/Accepted par rapport \xe0 201/Created</code>",id:"202accepted-par-rapport-\xe0-201created",children:[]},{value:"Traitement synchrone par rapport au traitement asynchrone",id:"traitement-synchrone-par-rapport-au-traitement-asynchrone",children:[]}],p={toc:l};function c(e){var n=e.components,t=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"comment-\xe7a-marche"},"Comment \xe7a marche"),(0,a.kt)("p",null,"Sur la plateforme, chaque projet dispose de son propre inbox URL, ressemblant \xe0 ",(0,a.kt)("inlineCode",{parentName:"p"},"https://www.openfn.org/inbox/54804f1a-4a70-4392-97cb-1f350e98e9c8"),". Cette grande cha\xeene de nombres et de lettres s'appelle un ",(0,a.kt)("inlineCode",{parentName:"p"},"UUID"),". C'est votre adresse, et l'\xab\xa0endroit\xa0\xbb sur le web o\xf9 vous enverrez les donn\xe9es pour le traitement par OpenFn si vous faites une int\xe9gration en temps r\xe9el ou \xab\xa0bas\xe9e sur des \xe9v\xe9nements\xa0\xbb."),(0,a.kt)("p",null,"Votre projet sera toujours \xe0 l'\xe9coute, et chaque fois qu'une requ\xeate HTTP est re\xe7ue \xe0 cette URL, nous r\xe9pondrons avec un ",(0,a.kt)("inlineCode",{parentName:"p"},"202/Accepted")," et commen\xe7ons \xe0 traiter les donn\xe9es envoy\xe9es soit dans le ",(0,a.kt)("inlineCode",{parentName:"p"},"body")," (corps) ou les ",(0,a.kt)("inlineCode",{parentName:"p"},"parameters")," (param\xe8tres) de cette requ\xeate."),(0,a.kt)("h2",{id:"202accepted-par-rapport-\xe0-201created"},(0,a.kt)("inlineCode",{parentName:"h2"},"202/Accepted par rapport \xe0 201/Created")),(0,a.kt)("p",null,"Vous avez probablement entendu parler de ",(0,a.kt)("inlineCode",{parentName:"p"},"200/OK")," ou d'autres \xab\xa0codes d'\xe9tat\xa0\xbb courants, mais la diff\xe9rence entre un ",(0,a.kt)("inlineCode",{parentName:"p"},"201")," et un ",(0,a.kt)("inlineCode",{parentName:"p"},"202")," est tr\xe8s int\xe9ressante d'un point de vue perspective d'int\xe9gration. ."),(0,a.kt)("p",null,"Le ",(0,a.kt)("inlineCode",{parentName:"p"},"201/Created")," signifie que nous avons termin\xe9 le traitement des donn\xe9es qui nous ont \xe9t\xe9 envoy\xe9es par le demandeur. Habituellement, cette r\xe9ponse est accompagn\xe9e d'une charge utile avec un nouvel ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," pour la ressource cr\xe9\xe9e. Ce n'est ",(0,a.kt)("em",{parentName:"p"},"pas")," ce que fait OpenFn, par contre nous envoyons un ",(0,a.kt)("inlineCode",{parentName:"p"},"202/Accepted")," indiquant que votre requ\xeate \xe9tait acceptable et nous nous mettrons au travail."),(0,a.kt)("p",null,":::astuce"),(0,a.kt)("p",null,"OpenFn envoie un ",(0,a.kt)("inlineCode",{parentName:"p"},"202/Accepted")," indiquant que votre requ\xeate a pass\xe9 notre validation initiale (c.\xe0.d. que les donn\xe9es sont du ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," valide ou du ",(0,a.kt)("inlineCode",{parentName:"p"},"XML")," analysable et que l'URL de l'inbox existe) et que nous l'avons mise en file d'attente pour traitement."),(0,a.kt)("p",null,":::"),(0,a.kt)("p",null,"En coulisses, nous avons mis en place un syst\xe8me de files d'attente simple et durable qui nous emp\xeache de \xab\xa0laisser tomber\xa0\xbb cet \xe9v\xe9nement \xe0 quelque moment que ce soit \xe0 partir de maintenant."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Nous le chargerons dans la base de donn\xe9es et bient\xf4t il appara\xeetra comme un nouveau \xab\xa0message\xa0\xbb enregistr\xe9 dans votre page \xab\xa0Inbox\xa0\xbb."),(0,a.kt)("li",{parentName:"ol"},"Nous v\xe9rifierons les triggers de tous les jobs actifs dans votre projet et si il correspond \xe0 l'un de ces triggers, nous l'enverrons dans une autre file d'attente pour le job en cours."),(0,a.kt)("li",{parentName:"ol"},"Nous nous assurerons que votre projet est configur\xe9 correctement et que vous n'avez pas d\xe9pass\xe9 vos limites d'utilisation."),(0,a.kt)("li",{parentName:"ol"},"Nous allons commencer \xe0 ex\xe9cuter un job, qui peut lui-m\xeame faire des centaines de requ\xeates HTTP uniques vers d'autres points de terminaison."),(0,a.kt)("li",{parentName:"ol"},'Et finalement, nous vous ferons un rapport sur l\'\xe9tat de cette ex\xe9cution et bient\xf4t elle appara\xeetra comme un nouveau "run" dans votre page "Activity History".')),(0,a.kt)("p",null,"Selon le nombre de requ\xeates de votre job, la quantit\xe9 de donn\xe9es \xe0 traiter et le temps de r\xe9ponse de vos autres syst\xe8mes, tout cela peut prendre un certain temps\xa0: de ",(0,a.kt)("inlineCode",{parentName:"p"},"200ms")," \xe0 ",(0,a.kt)("inlineCode",{parentName:"p"},"20 minutes"),"\xa0!"),(0,a.kt)("p",null,"Si le syst\xe8me qui envoie les donn\xe9es \xe0 OpenFn a besoin de savoir si toutes les op\xe9rations \xe0 l'\xe9tape 4 se sont termin\xe9es avec succ\xe8s (qu'est-ce que vous comptez comme un succ\xe8s avec ces diff\xe9rentes actions personnalis\xe9es, au fait?), vous devriez envisager de mettre en \u0153uvre un mod\xe8le SAGA, par lequel, une fois tout ce traitement termin\xe9, vous d\xe9clenchez une autre requ\xeate de retour au syst\xe8me initial pour rendre compte sur les t\xe2ches en aval. Cela peut \xeatre fait dans OpenFn avec ",(0,a.kt)("a",{parentName:"p",href:"/documentation/jobs/multiple-operations"},"Flow Triggers"),"."),(0,a.kt)("h2",{id:"traitement-synchrone-par-rapport-au-traitement-asynchrone"},"Traitement synchrone par rapport au traitement asynchrone"),(0,a.kt)("p",null,"Sur ",(0,a.kt)("strong",{parentName:"p"},"OpenFn/platform"),", le traitement est asynchrone par d\xe9faut. Plusieurs flux de travaux complexes peuvent \xeatre lanc\xe9s, la gestion des erreurs et les notifications se font en aval."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Si vous envoyez des donn\xe9es \xe0 l'inbox OpenFn, vous recevrez un ",(0,a.kt)("inlineCode",{parentName:"li"},"202")," en cas de succ\xe8s (et ",(0,a.kt)("inlineCode",{parentName:"li"},"502")," si nous n'avons pas re\xe7u vos donn\xe9es/mauvaise demande)."),(0,a.kt)("li",{parentName:"ol"},"Nous le chargerons ensuite dans la base de donn\xe9es et bient\xf4t il appara\xeetra comme un nouveau \xab\xa0message\xa0\xbb enregistr\xe9 dans votre page \xab\xa0Inbox\xa0\xbb."),(0,a.kt)("li",{parentName:"ol"},"Nous v\xe9rifierons les triggers de tous les jobs actifs dans votre projet et si il correspond \xe0 l'un de ces triggers, nous l'enverrons dans une autre file d'attente pour le job en cours."),(0,a.kt)("li",{parentName:"ol"},"Nous nous assurerons que votre projet est configur\xe9 correctement et que vous n'avez pas d\xe9pass\xe9 vos limites d'utilisation."),(0,a.kt)("li",{parentName:"ol"},"Nous allons commencer \xe0 ex\xe9cuter un job, qui peut lui-m\xeame faire des centaines de requ\xeates HTTP uniques vers d'autres points de terminaison."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("em",{parentName:"li"},"Si vous voulez ensuite renvoyer une mise \xe0 jour au syst\xe8me source... vous pouvez configurer un autre job pour renvoyer les requ\xeates et les mises \xe0 jour au syst\xe8me source d\xe9clencheur."))),(0,a.kt)("p",null,"Dans ",(0,a.kt)("strong",{parentName:"p"},"OpenFn/microservice")," ou en utilisant des outils open-source, vous pouvez cr\xe9er un syst\xe8me synchrone. Nous avons cr\xe9\xe9 un moyen de configurer les points de terminaison des inbox comme \xab\xa0synchrone\xa0\xbb, ce qui signifie qu'ils garderont une connexion ouverte ",(0,a.kt)("em",{parentName:"p"},"jusqu'\xe0 ce que")," la totalit\xe9 du traitement ci-dessus soit termin\xe9e, puis r\xe9pondent avec un ",(0,a.kt)("inlineCode",{parentName:"p"},"2XX"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"4xx"),", ou ",(0,a.kt)("inlineCode",{parentName:"p"},"5XX"),". Ceci n'est pas recommand\xe9 pour les syst\xe8mes \xe0 volume \xe9lev\xe9, mais peut \xeatre une exigence pour certaines impl\xe9mentations ; l'esprit de ",(0,a.kt)("strong",{parentName:"p"},"OpenFn/microservice")," est de donner autant de de contr\xf4le que possible \xe0 quiconque le d\xe9ploie sur ses serveurs."))}c.isMDXComponent=!0}}]);