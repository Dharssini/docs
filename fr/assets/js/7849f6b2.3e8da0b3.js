"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[1877],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,c=m["".concat(l,".").concat(d)]||m[d]||h[d]||o;return n?a.createElement(c,i(i({ref:t},u),{},{components:n})):a.createElement(c,i({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},21813:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return h}});var a=n(83117),r=n(80102),o=(n(67294),n(3905)),i=["components"],s={},l=void 0,p={unversionedId:"manage/troubleshooting-tips-on-platform",id:"manage/troubleshooting-tips-on-platform",title:"troubleshooting-tips-on-platform",description:"- - -",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/manage/troubleshooting-tips-on-platform.md",sourceDirName:"manage",slug:"/manage/troubleshooting-tips-on-platform",permalink:"/fr/documentation/manage/troubleshooting-tips-on-platform",draft:!1,editUrl:"https://github.com/openfn/docs/edit/main/docs/manage/troubleshooting-tips-on-platform.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Gestion de projet",permalink:"/fr/documentation/manage/platform-mgmt"},next:{title:"Codes de sortie et erreurs",permalink:"/fr/documentation/jobs/errors"}},u={},h=[{value:"Runs",id:"runs",level:2},{value:"Exit codes",id:"exit-codes",level:3},{value:"The time it took for the job to fail",id:"the-time-it-took-for-the-job-to-fail",level:3},{value:"Run logs",id:"run-logs",level:3},{value:"Mappings",id:"mappings",level:4},{value:"Error messages",id:"error-messages",level:4},{value:"Leveraging search and filtering in OpenFn",id:"leveraging-search-and-filtering-in-openfn",level:2},{value:"Bulk reprocessing",id:"bulk-reprocessing",level:2},{value:"Other tips",id:"other-tips",level:2},{value:"Sign up for email alerts",id:"sign-up-for-email-alerts",level:2},{value:"More",id:"more",level:2},{value:"Common Error Messages",id:"common-error-messages",level:3}],m={toc:h};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("hr",null),(0,o.kt)("p",null,"title: Troubleshooting Platform sidebar_label: Troubleshooting"),(0,o.kt)("hr",null),(0,o.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Currently, this section is specific to ",(0,o.kt)("strong",{parentName:"p"},"OpenFn/platform"),"."))),(0,o.kt)("h2",{id:"runs"},"Runs"),(0,o.kt)("p",null,"One of the most helpful pages for troubleshooting on OpenFn platform is the ",(0,o.kt)("a",{parentName:"p",href:"/documentation/getting-started/terminology/#activity-history"},"Activity History"),". This pages provides a list of all of the runs executed in a project and always marks any failed runs red or yellow. Project administrators can troubleshoot errors by clicking into the run to review the run details. Keep reading for all the important parts of a run and how to leverage them during your troubleshooting!"),(0,o.kt)("h3",{id:"exit-codes"},"Exit codes"),(0,o.kt)("p",null,"Every run will have an exit code. The exit code is a way for OpenFn to classify the run status and can help you troubleshoot errors. Learn more about OpenFn exit codes and what each one means ",(0,o.kt)("a",{parentName:"p",href:"/documentation/jobs/errors"},"here"),"."),(0,o.kt)("h3",{id:"the-time-it-took-for-the-job-to-fail"},"The time it took for the job to fail"),(0,o.kt)("p",null,"The run will also record how long it took before the job failed. This information helps users understand if the job is taking longer than it should and is especially helpful with errors that involve timeouts. You can use the run to determine at which operation the job is timing out and determine if the job performance can be optimized."),(0,o.kt)("h3",{id:"run-logs"},"Run logs"),(0,o.kt)("p",null,"As jobs are developed it is important to log details which will make testing and troubleshooting much easier in the future. Keep reading for the two most important parts of a run log!"),(0,o.kt)("h4",{id:"mappings"},"Mappings"),(0,o.kt)("p",null,"The logs should be written so that you can see exactly what was mapped between the source system and the destination system. In cases where data received from the source system is ",(0,o.kt)("em",{parentName:"p"},"not")," being posted to the OpenFn inbox (often for security reasons), it can even be helpful to log the data that was received. In summary, the log can have a ",(0,o.kt)("strong",{parentName:"p"},'"Data received from source system"')," section and a ",(0,o.kt)("strong",{parentName:"p"},'"Data to be uploaded to destination system"')," section."),(0,o.kt)("p",null,"These logs can help admins verify that the source data and the data being uploaded to the destination system is correct. For example, seeing in the logs that that a unique identifier is being mapped to ",(0,o.kt)("inlineCode",{parentName:"p"},"undefined")," in the destination system can help you understand this Salesforce error message:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"METHOD_NOT_ALLOWED: HTTP Method 'PATCH' not allowed. Allowed are GET,HEAD,POST at HttpApi.getError"),"."),(0,o.kt)("h4",{id:"error-messages"},"Error messages"),(0,o.kt)("p",null,"The run log should also tell us if an error has been thrown, and depending on the destination system, what the error message is. Sometimes the error message is very specific like:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"NOT_FOUND: Provided external ID field does not exist or is not accessible")),(0,o.kt)("p",null,"This error from Salesforce usually indicates that ",(0,o.kt)("inlineCode",{parentName:"p"},"External ID")," has not been checked in the field settings in Salesforce."),(0,o.kt)("p",null,"Other error messages are not as clear and can take some time to debug:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"TypeError [Error]: Cannot read property 'split' of undefined")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"TypeErrors"))," usually indicate that the job received a part of the message that it wasn't expecting, or there is a syntax error in your job code. It means that the job needs to be updated to know how to handle the message. In this case, the job received an old version of the Commcare form which was missing a field which the job called the ",(0,o.kt)("inlineCode",{parentName:"p"},"split")," function on. You can determine this by reviewing the job for which fields the split function is being called on and checking that they are all present in the message."),(0,o.kt)("p",null,"The more you test and troubleshoot with a particular system, the more familiar with it's error messages you become."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"OpenFn has outlined several of the more common error messages specific to some of the systems that we have integrated in the past. Explore these systems and their error messages ",(0,o.kt)("a",{parentName:"p",href:"/documentation/apps/anything"},"here"),"."))),(0,o.kt)("h2",{id:"leveraging-search-and-filtering-in-openfn"},"Leveraging search and filtering in OpenFn"),(0,o.kt)("p",null,"Leverage the various search functionalities in OpenFn to find the right messages and runs to support your troubleshooting. You can search in the Inbox, Activity History, and Search Console."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/documentation/manage/platform-mgmt/#inbox"},"Inbox"))," - The inbox contains all the messages that have been sent to your project. Search your project inbox for messages that contain a specific body text. You can also filter these messages by date, run status and trigger. You can even use filtering to see all the messages whose last run failed, so you can get to troubleshooting! Learn more about inbox filtering ",(0,o.kt)("a",{parentName:"p",href:"/documentation/manage/platform-mgmt/#inbox"},"here"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/documentation/getting-started/terminology/#activity-history"},"Activity history"))," - As discussed above, the activity history records all runs for the current project. It has similar search and filtering capabilities as the inbox except it doesn't require valid JSON in the search box. Use the search in activity history instead of inbox when you want to search ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"run logs"))," instead of messages.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/documentation/manage/platform-mgmt/#search-console"},"Search console"))," - The search console will search in both message bodies ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"and"))," run logs for any string is entered!"))),(0,o.kt)("h2",{id:"bulk-reprocessing"},"Bulk reprocessing"),(0,o.kt)("p",null,"Sometimes you'll see several messages in the inbox whose last run failed because of the same error. Once you have resolved the error, you can test it by rerunning the transaction for one failed run. If this passes, you can then leverage ",(0,o.kt)("strong",{parentName:"p"},"bulk reprocessing")," in the OpenFn inbox and activity history to reprocess all messages in the current filtered query. This means OpenFn will rerun all of those transactions in the order they were received. Learn more about bulk reprocessing ",(0,o.kt)("a",{parentName:"p",href:"/documentation/manage/platform-mgmt/#bulk-reprocess-messages"},"here"),"."),(0,o.kt)("p",null,"Sometimes you'll have so many messages with failed runs that it will be virtually impossible to open each one and inspect the run logs. In this case, you can resolve the errors and bulk reprocess as you go, each time reducing the number of failures in the inbox and generating a short list of the remaining errors."),(0,o.kt)("h2",{id:"other-tips"},"Other tips"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Posting messages to the inbox")," - You can post messages directly to the OpenFn inbox by clicking the ",(0,o.kt)("strong",{parentName:"li"},"plus")," icon on the bottom left of the inbox. This feature can come in handy when you have lengthy messages which include several rows of data. You simply copy and paste one row of data from the original message to a new message and post it to the inbox. This allows you to troubleshoot individual rows of data."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Editing messages")," - Messages in the inbox can be edited by clicking the pencil icon in the message. This is a quick way to update and test any mapping fixes with data that is already in the inbox. Once you verify that the run for the updated message passes, you can make the appropriate updates to the source sytem and post the correct data to the inbox moving forward."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Organizing error messages")," - When working with various different jobs and error messages, it is helpful to organize all errors in a spreadsheet which links to the last run, error, and status.")),(0,o.kt)("h2",{id:"sign-up-for-email-alerts"},"Sign up for email alerts"),(0,o.kt)("p",null,"You can turn on notifications to receive email alerts when a job fails. When you receive an error email, you can click \u201cinspect & take action\u201d to be taken to the failed run and being troubleshooting!"),(0,o.kt)("h2",{id:"more"},"More"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"What happens if my survey data from ODK needs to link to existing records in my Salesforce system but a respondent enters or selects an invalid ",(0,o.kt)("inlineCode",{parentName:"p"},"external ID"),"?")),(0,o.kt)("p",null,"Great question, and don't worry, it happens all the time. Assuming you've already taken all possible measures to either pre-load external IDs in your ODK form or use more human-proof IDs (like barcodes and fingerprints) here's the flow of work:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Read the email, and inspect the reason for failure.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"99% of failed runs on OpenFn are due to ",(0,o.kt)("inlineCode",{parentName:"p"},"value mismatches"),". The ",(0,o.kt)("em",{parentName:"p"},"collected")," ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," in ODK doesn't match the ",(0,o.kt)("em",{parentName:"p"},"expected")," ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," in Salesforce. You must now chose to either:"),(0,o.kt)("p",{parentName:"li"},"A. Edit the source ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," in your ",(0,o.kt)("inlineCode",{parentName:"p"},"receipt")," & retry the attempt."),(0,o.kt)("p",{parentName:"li"},"B. Edit the related ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," in your destination system & retry the attempt."),(0,o.kt)("p",{parentName:"li"},'C. Ignore the attempt\u2014this source data will never reach your destination system. (There have been reports of ODK Aggregate\'s JSON publisher sending duplicate values. If that happens and your run fails due to "duplicate values" on a particular unique field you can safely ignore the run in OpenFn.)'))),(0,o.kt)("p",null,"Editing data in your destination system can be done through that system's interface. Many tools that act as ",(0,o.kt)("inlineCode",{parentName:"p"},"sources")," (like ODK) do not allow for easy editing and re-submission of data. You can use OpenFn to edit the source data before retrying the attempt."),(0,o.kt)("h3",{id:"common-error-messages"},"Common Error Messages"),(0,o.kt)("p",null,"The most common error messages with English explanations are:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"DUPLICATE_VALUE: duplicate value found: ODK_uuid__c duplicates value on record with id: a0524000005wNw0\nThe insert is blocked because you are attempting to create a new record with a\nunique field with the same value as an existing record.\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"Required value missing\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ExternalId not found\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"{ INVALID_FIELD_FOR_INSERT_UPDATE: Unable to create/update fields: Contact__c.\nPlease check the security settings of this field and verify that it is\nread/write for your profile or permission set. }\n")),(0,o.kt)("p",null,"This last one may arise if a master-detail relationship in Salesforce is not set as reparentable and the user attempts to run an upsert."))}d.isMDXComponent=!0}}]);