"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[28206],{3905:(e,n,t)=>{t.d(n,{Zo:()=>l,kt:()=>v});var o=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=o.createContext({}),p=function(e){var n=o.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},l=function(e){var n=p(e.components);return o.createElement(u.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},c=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,u=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),c=p(t),v=r,f=c["".concat(u,".").concat(v)]||c[v]||d[v]||s;return t?o.createElement(f,a(a({ref:n},l),{},{components:t})):o.createElement(f,a({ref:n},l))}));function v(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,a=new Array(s);a[0]=c;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,a[1]=i;for(var p=2;p<s;p++)a[p]=t[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}c.displayName="MDXCreateElement"},57738:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var o=t(87462),r=(t(67294),t(3905));const s={title:"D\xe9veloppement d'applications connect\xe9es",sidebar_label:"Cr\xe9er des APIs conformes"},a=void 0,i={unversionedId:"for-devs",id:"for-devs",title:"D\xe9veloppement d'applications connect\xe9es",description:"Cette section est pour vous si vous souhaitez cr\xe9er ou \xe9tendre une application existante pouvant se connecter \xe0 OpenFn. Nous suivons les directives de l'api JSON standard moderne.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/for-devs.md",sourceDirName:".",slug:"/for-devs",permalink:"/fr/documentation/for-devs",draft:!1,editUrl:"https://github.com/openfn/docs/edit/main/docs/for-devs.md",tags:[],version:"current",frontMatter:{title:"D\xe9veloppement d'applications connect\xe9es",sidebar_label:"Cr\xe9er des APIs conformes"},sidebar:"docs",previous:{title:"Documentation Roadmap",permalink:"/fr/documentation/roadmap"},next:{title:"Google Summer of Code",permalink:"/fr/documentation/gsoc"}},u={},p=[{value:"Envoi des donn\xe9es \xe0 OpenFn",id:"envoi-des-donn\xe9es-\xe0-openfn",level:2},{value:"Taille de la charge",id:"taille-de-la-charge",level:3},{value:"R\xe9ception des donn\xe9es d&#39;OpenFn",id:"r\xe9ception-des-donn\xe9es-dopenfn",level:2}],l={toc:p};function d(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Cette section est pour vous si vous souhaitez cr\xe9er ou \xe9tendre une application existante pouvant se connecter \xe0 OpenFn. Nous suivons les directives de l'api JSON standard moderne."),(0,r.kt)("p",null,"Pour que votre application soit un fournisseur de donn\xe9es (ou \xab source \xbb) pour les int\xe9grations d'OpenFn, nous vous recommandons fortement de cr\xe9er un \xab service de notifications \xbb (parfois appel\xe9 un \xab service de webhooks \xbb ou \xab API push bas\xe9e sur des \xe9v\xe9nements \xbb). Ceci est pr\xe9f\xe9rable \xe0 l'utilisation d'une api REST pour deux raisons : (1) Un service de notifications donnera \xe0 vos clients la possibilit\xe9 de configurer des int\xe9grations en temps r\xe9el, et (2) un service de notifications est plus efficace pour vos serveurs et OpenFn \u2014 au lieu de faire des requ\xeates et de les traiter toutes les X secondes, vos serveurs et les serveurs d'OpenFn ne fonctionneront que lorsque de nouvelles donn\xe9es seront disponibles."),(0,r.kt)("p",null,"Pour que votre application soit un consommateur (ou une \xab destination \xbb) pour OpenFn, vous devez soit disposer d'une API de repos standard, bas\xe9e sur JSON, soit cr\xe9er un paquet de langue qui r\xe9pond aux sp\xe9cifications de votre API."),(0,r.kt)("h2",{id:"envoi-des-donn\xe9es-\xe0-openfn"},"Envoi des donn\xe9es \xe0 OpenFn"),(0,r.kt)("p",null,"Pour envoyer des donn\xe9es \xe0 OpenFn, votre application doit \xeatre en mesure de faire un message HTTPS \xe0 une URL externe avec un objet JSON valide comme corps du message. Consultez l'exemple suivant utilisant cURL :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X POST \\\n  -H "Content-Type: application/json" \\\n  -H "Cache-Control: no-cache" \\\n  -d \'{"foo":"bar", "baz":"qux"}\' \\\n  "https://staging.openfn.org/inbox/some-secret-api-key"\n')),(0,r.kt)("p",null,"OpenFn r\xe9pondra avec un objet JSON de 200 et un objet JSON vide en cas de publication r\xe9ussie. 400s signifie que l'URL externe de l'utilisateur est incorrecte, et 500s signifie qu'il y a une erreur d'application sur OpenFn. Bien que les 500 soient rares, ils peuvent \xeatre dus \xe0 un JSON non valide dans le corps de votre MESSAGE."),(0,r.kt)("p",null,"Si vous ne pouvez pas notifier une URL externe quand un \xe9v\xe9nement a lieu, vous pouvez toujours vous int\xe9grer \xe0 OpenFn si vous avez une API REST bas\xe9e sur JSON. Les utilisateurs d'OpenFn peuvent envoyer des requ\xeates HTTP GET \xe0 votre application et effectuer des actions suppl\xe9mentaires en fonction de votre r\xe9ponse. Vous devez autoriser l'authentification de base ou par jeton et la r\xe9ponse \xe0 un GET valide avec JSON. Il n'y a pas de format sp\xe9cifique pour votre r\xe9ponse, car les utilisateurs peuvent l'analyser comme ils le souhaitent, extraire les donn\xe9es pertinentes, puis effectuer d'autres actions, comme la charger dans un syst\xe8me de destination, avec ces donn\xe9es. Voir ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-http"},"language-http")," pour des d\xe9tails sur la fa\xe7on dont les utilisateurs font ces requ\xeates HTTP g\xe9n\xe9riques."),(0,r.kt)("h3",{id:"taille-de-la-charge"},"Taille de la charge"),(0,r.kt)("p",null,"Si vous utilisez la plateforme, et que vous ne pr\xe9voyez pas d'utiliser un plan d'entreprise, vous devrez prendre en compte la taille des donn\xe9es que vous envoyez dans chaque bloc de charge. Ex\xe9cutez ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," est g\xe9n\xe9ralement limit\xe9 \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"10 MB")," et vous devriez donc garder vos charges bien en dessous de cette limite."),(0,r.kt)("h2",{id:"r\xe9ception-des-donn\xe9es-dopenfn"},"R\xe9ception des donn\xe9es d'OpenFn"),(0,r.kt)("p",null,"Pour faciliter la connexion des utilisateurs \xe0 votre application, il est fortement recommand\xe9 de cr\xe9er un package de langue avec l'authentification requise et un ensemble d'actions simples et autoris\xe9es qui sont bien abstraites dans les \xab fonctions d'assistances \xbb. Voir ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-dhis2"}," language-dhis2 ")," pour un exemple de package de langage qui cr\xe9e une interface plus simple pour un api REST traditionnelle bas\xe9e sur JSON. Les adaptateurs sont \xe9crits en Javascript et ex\xe9cutez en Node. Vous pouvez convertir le JSON d'OpenFn en XML, ou en tout autre format avant de l'envoyer \xe0 votre application et vous pouvez utiliser tous les modules de node que vous aimeriez. Voir ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-postgresql"},"language-postgresql")," pour un exemple d'adaptateur qui se connecte directement aux bases de donn\xe9es PostgreSQL en utilisant un module populaire NPM appel\xe9 \xab pg \xbb."),(0,r.kt)("p",null,"Pour recevoir des donn\xe9es de l'adaptateur g\xe9n\xe9rique ",(0,r.kt)("inlineCode",{parentName:"p"},"language-http")," d'OpenFn, votre application doit autoriser les requ\xeates POST, PUT ou GET de base, jeton ou condens\xe9 authentifi\xe9es. (Bien qu'il ne soit pas conseill\xe9 de cr\xe9er une API qui n\xe9cessite des requ\xeates GET pour cr\xe9er ou mettre \xe0 jour des donn\xe9es.)"))}d.isMDXComponent=!0}}]);