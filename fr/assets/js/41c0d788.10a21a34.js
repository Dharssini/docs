"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[270],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return f}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),_=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=_(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=_(t),f=a,p=d["".concat(l,".").concat(f)]||d[f]||u[f]||i;return t?r.createElement(p,o(o({ref:n},s),{},{components:t})):r.createElement(p,o({ref:n},s))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var _=2;_<i;_++)o[_]=t[_];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1063:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return c},metadata:function(){return _},toc:function(){return u}});var r=t(83117),a=t(80102),i=(t(67294),t(3905)),o=["components"],c={title:"Q4 2022] Upsert Supervision - Accompaniment",sidebar_label:"Q4 2022] Upsert Supervision - Accompaniment",id:"Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22",keywords:["library","job","expression","salesforce","dataValue","field","fields","relationship","upsert"]},l=void 0,_={unversionedId:"jobs/auto/Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22",id:"jobs/auto/Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22",title:"Q4 2022] Upsert Supervision - Accompaniment",description:"This job was provided by an OpenFn.org user via the job library API.",source:"@site/library/jobs/auto/Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22.md",sourceDirName:"jobs/auto",slug:"/jobs/auto/Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22",permalink:"/fr/library/jobs/auto/Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22",draft:!1,tags:[],version:"current",frontMatter:{title:"Q4 2022] Upsert Supervision - Accompaniment",sidebar_label:"Q4 2022] Upsert Supervision - Accompaniment",id:"Q4-2022-Upsert-Supervision-Accompaniment-2022-08-22",keywords:["library","job","expression","salesforce","dataValue","field","fields","relationship","upsert"]},sidebar:"library",previous:{title:"\u2728 Q3 2022] Upsert Person Visit",permalink:"/fr/library/jobs/auto/Q3-2022-Upsert-Person-Visit-2022-06-28"},next:{title:"Q4 2022] Upsert Supervision - Feedback",permalink:"/fr/library/jobs/auto/Q4-2022-Upsert-Supervision-Feedback-2022-08-19"}},s={},u=[{value:"Metadata",id:"metadata",level:2},{value:"Key Functions",id:"key-functions",level:2},{value:"Expression",id:"expression",level:2}],d={toc:u};function f(e){var n=e.components,t=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("em",null,"This job was provided by an OpenFn.org user via the job library API."),(0,i.kt)("h2",{id:"metadata"},"Metadata"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Name: Q4 2022] Upsert Supervision - Accompaniment"),(0,i.kt)("li",{parentName:"ul"},"Adaptor: ",(0,i.kt)("a",{parentName:"li",href:"https://www.github.com/openfn/language-salesforce"},(0,i.kt)("inlineCode",{parentName:"a"},"@openfn/language-salesforce"))),(0,i.kt)("li",{parentName:"ul"},"Adaptor Version: ",(0,i.kt)("a",{parentName:"li",href:"https://www.github.com/openfn/language-salesforce"},(0,i.kt)("inlineCode",{parentName:"a"},"latest"))),(0,i.kt)("li",{parentName:"ul"},"Created about 2 months ago"),(0,i.kt)("li",{parentName:"ul"},"Updated 1 day ago"),(0,i.kt)("li",{parentName:"ul"},"Score: ",(0,i.kt)("b",null,"38")," (an ",(0,i.kt)("a",{parentName:"li",href:"/library/#library-scores"},"indicator")," of how useful this job may be)")),(0,i.kt)("h2",{id:"key-functions"},"Key Functions"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"dataValue"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"field"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fields"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"relationship"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"upsert")),(0,i.kt)("h2",{id:"expression"},"Expression"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"//Job to integrate CommCare 'Accompaniement' form from the Supervision App\nfn(state => {\nstate.handleMultiSelect = function (state, multiField) {\n    return multiField\n      ? multiField\n          .replace(/ /g, ';')\n      : '';\n  };\n  \n    state.cleanChoice = function (state, choice) {\n    if (choice) {\n      return choice.charAt(0).toUpperCase() + choice.slice(1).replace('_', ' ');\n    } else {\n      return '';\n    }\n  }\n\n   return {\n    ...state\n  };\n  \n});\n\n\n\n\nupsert(\n  'Supervision_Forms__c',\n  'CommCare_Form_ID__c',\n  fields(\n    field('CommCare_Form_ID__c', dataValue('id')),\n    relationship('RecordType', 'Name', 'Accompanient Form'),\n    field('Supervisor_Name__c', dataValue('form.prologue.supervisor_sfid')),\n    field('CHW_Name__c', dataValue('form.prologue.chw_sfid')),\n      relationship(\n      'Village__r',\n      'CommCare_User_ID__c',\n      dataValue('form.prologue.chw_village')\n    ),\n    relationship('Household_Code__r', \n    'Name',\n    dataValue('form.prologue.hh_code')\n    ),\n    field('Form_Date__c',dataValue('form.Date')),\n    field('Fertile_Women_in_Household__c',dataValue('form.WRA_check')),\n    field('CHW_Asked_About_Family_Planning__c',dataValue('form.women_of_reproductive_age.fp_check')),\n    field('Contraception_Distributed__c', state => {\n      var choice = dataValue(\n        'form.women_of_reproductive_age.fp_resources_check'\n      )(state);\n      return state.handleMultiSelect(state, choice);\n    }),\n    \n    \n    field('Household_members_aware_of_CHW_SRH__c',dataValue('form.women_of_reproductive_age.srh_awareness_check')),\n    field('Pregnant_Women_in_HH__c',dataValue('form.pregnancy_check')),\n    field('CHW_Asked_About_ANC_Visits__c',dataValue('form.pregnant_women.anc_check')),\n    field('CHW_Counseled_On_Value_of_ANC_Visits__c',dataValue('form.pregnant_women.anc_counsel_check')),\n    field('CHW_Read_Each_Pregnancy_Danger_Sign__c',dataValue('form.pregnant_women.danger_sign_check')),\n    field('Household_aware_of_CHW_MCH_Services__c',dataValue('form.pregnant_women.pregnancy_support_awareness_check')),\n    field('Pregnant_Woman_Delivered__c',dataValue('form.pregnant_women.delivery_check')),\n    field('Used_MCH_Booklet__c',dataValue('form.delivery.vaccination_check')),\n    field('Counsel_on_vaccination_schedule__c',dataValue('form.delivery.vaccination_counsel_check')),\n    field('Counselled_on_Exclusive_Breastfeeding__c',dataValue('form.delivery.ebf_check')),\n    field('Children_Under_5_in_Household__c',dataValue('form.cu5_check')),\n    field('All_children_under_5_registered__c',dataValue('form.children_under_5.cu5_enrollment_check')),\n    field('MUAC_taken_for_all_children__c',dataValue('form.children_under_5.muac_check')),\n    field('Measured_MUAC_circumference_properly__c',dataValue('form.children_under_5.muac_method_check')),\n    //     field('Measured_MUAC_circumference_properly__c', state => {\n    //   var choice = dataValue(\n    //     'form.children_under_5.muac_method_check'\n    //   )(state);\n    //   return state.cleanChoice(state, choice);\n    // }),\n    field('HIV_Members_in_the_Household__c',dataValue('form.hiv_check')),\n    field('Recorded_HIV_Status_Information__c',dataValue('form.hiv_clients.hiv_info_check')),\n    field('Counselled_on_ART_Adherence_HIV_Services__c',dataValue('form.hiv_clients.hiv_counsel_check')),\n    field('Sick_Household_Members_at_Visit__c',dataValue('form.illness_check')),\n    field('Household_member_reported_fever__c',dataValue('form.illness_referrals.fever_check')),\n    field('Conducted_malaria_home_test__c', dataValue('form.illness_referrals.malaria_test_check')),\n    field('Malaria_test_protocol_followed__c',dataValue('form.illness_referrals.malaria_test_method_check')),\n    field('Sick_person_referred__c',dataValue('form.illness_referrals.referral_accompaniment_check')),\n    field('Referral_discussed_with_family__c',dataValue('form.illness_referrals.referral_followup_check')),\n    field('Distributed_treatments_medications__c',dataValue('form.distribution_check')),\n    field('Stock_is_full__c',dataValue('form.stocks_check')),\n    field('Missing_Stock__c', state => {\n      var choice = dataValue(\n        'form.missing_stocks_details'\n      )(state);\n      return state.handleMultiSelect(state, choice);\n    }),\n    field('Other_Missing_Stock__c',dataValue('form.missing_stocks_details_other')),\n    field('Demonstrated_active_listening__c',dataValue('form.chw_behavior.active_listening_check')),\n    field('Acted_with_respect_courtesy__c',dataValue('form.chw_behavior.respect_check')),\n    field('CHW_Rating__c',dataValue('form.chw_behavior.interview_technique_check')),\n    field('Tablet_used__c',dataValue('form.chw_behavior.tablet_use_check')),\n    field('Tablet_used_effectively__c',dataValue('form.chw_behavior.tablet_competency_check')),\n    field('Tablet_problem_observed__c', state => {\n      var choice = dataValue(\n        'form.chw_behavior.tablet_issues'\n      )(state);\n      return state.handleMultiSelect(state, choice);\n    }),\n    field('Visit_Length_Mins__c',dataValue('form.visit_length')),\n    field('Accompanient_components_covered__c', state => {\n        var choice = dataValue(\n          'form.feedback_type'\n           )(state);\n      return state.handleMultiSelect(state, choice);\n    }), \n    field('Other_comments__c',dataValue('form.supervisor_comments')),\n        field('Contraception_Distributed__c', state => {\n      var choice = dataValue(\n        'form.women_of_reproductive_age.fp_resources_check'\n      )(state);\n      return state.handleMultiSelect(state, choice);\n    }),\n     )\n);  \n")))}f.isMDXComponent=!0}}]);