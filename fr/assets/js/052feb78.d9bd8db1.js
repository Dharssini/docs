(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[8206],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return l},kt:function(){return f}});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=o.createContext({}),p=function(e){var n=o.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l=function(e){var n=p(e.components);return o.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(t),f=a,m=d["".concat(u,".").concat(f)]||d[f]||c[f]||r;return t?o.createElement(m,i(i({ref:n},l),{},{components:t})):o.createElement(m,i({ref:n},l))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=d;var s={};for(var u in n)hasOwnProperty.call(n,u)&&(s[u]=n[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=t[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},66616:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return u},default:function(){return l}});var o=t(22122),a=t(19756),r=(t(67294),t(3905)),i={title:"D\xe9veloppement d'applications connect\xe9es",sidebar_label:"Cr\xe9er des APIs conformes"},s={unversionedId:"for-devs",id:"for-devs",isDocsHomePage:!1,title:"D\xe9veloppement d'applications connect\xe9es",description:"Cette section est pour vous si vous souhaitez cr\xe9er ou \xe9tendre une application existante pouvant se connecter \xe0 OpenFn. Nous suivons les directives de l'api JSON standard moderne.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/for-devs.md",sourceDirName:".",slug:"/for-devs",permalink:"/fr/documentation/for-devs",editUrl:"https://github.com/openfn/docs/edit/main/docs/for-devs.md",version:"current",sidebar_label:"Cr\xe9er des APIs conformes",frontMatter:{title:"D\xe9veloppement d'applications connect\xe9es",sidebar_label:"Cr\xe9er des APIs conformes"},sidebar:"docs",previous:{title:"Frequently Asked Questions",permalink:"/fr/documentation/faqs"},next:{title:"Google Summer of Code",permalink:"/fr/documentation/gsoc"}},u=[{value:"Sending data to OpenFn",id:"sending-data-to-openfn",children:[{value:"Payload sizing",id:"payload-sizing",children:[]}]},{value:"Receiving data from OpenFn",id:"receiving-data-from-openfn",children:[]}],p={toc:u};function l(e){var n=e.components,t=(0,a.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Cette section est pour vous si vous souhaitez cr\xe9er ou \xe9tendre une application existante pouvant se connecter \xe0 OpenFn. Nous suivons les directives de l'api JSON standard moderne."),(0,r.kt)("p",null,"Pour que votre application soit un fournisseur de donn\xe9es (ou \xab source \xbb) pour les int\xe9grations d'OpenFn, nous vous recommandons fortement de cr\xe9er un \xab service de notifications \xbb (parfois appel\xe9 un \xab service de webhooks \xbb ou \xab API push bas\xe9e sur des \xe9v\xe9nements \xbb).  Ceci est pr\xe9f\xe9rable \xe0 l'utilisation d'une api REST pour deux raisons : (1) Un service de notifications donnera \xe0 vos clients la possibilit\xe9 de configurer des int\xe9grations en temps r\xe9el, et (2) un service de notifications est plus efficace pour vos serveurs et OpenFn \u2014 au lieu de faire des requ\xeates et de les traiter toutes les X secondes, vos serveurs et les serveurs d'OpenFn ne fonctionneront que lorsque de nouvelles donn\xe9es seront disponibles."),(0,r.kt)("p",null,'For your application to be a consumer (or "destination") for OpenFn, you must either have a standard, JSON-based rest API or create a language-package that meets your API specifications.'),(0,r.kt)("h2",{id:"sending-data-to-openfn"},"Sending data to OpenFn"),(0,r.kt)("p",null,"To send data to OpenFn, your application must be able to make an HTTPS post to an external URL with a valid JSON object as the post body. See the following example using cURL:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X POST \\\n  -H "Content-Type: application/json" \\\n  -H "Cache-Control: no-cache" \\\n  -d \'{"foo":"bar", "baz":"qux"}\' \\\n  "https://staging.openfn.org/inbox/some-secret-api-key"\n')),(0,r.kt)("p",null,"OpenFn will respond with a 200 and an empty JSON object in the event of a successful post. 400s mean that the user's external URL is wrong, and 500s means that there is an application error on OpenFn. While 500s are rare, they could be due to invalid JSON in your POST body."),(0,r.kt)("p",null,"If you cannot notify an external URL when some event takes place, you can still integrate with OpenFn if you have a JSON-based REST API. OpenFn users can make HTTP GET requests to your application and perform additional actions based on your response. You should allow either basic or token authentication and response to a valid GET with JSON. There is no specific format for your response, as users can parse it any way they'd like, extracting relevant data and then performing other actions\u2014like loading it into a destination system\u2014with that data. See ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-http"},"language-http")," for details on how users make these generic HTTP requests."),(0,r.kt)("h3",{id:"payload-sizing"},"Payload sizing"),(0,r.kt)("p",null,"If you're using the platform, and you're not planning on using an enterprise plan you'll have to consider the size of the data you're sending in each payload. Run ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," is typically limited to ",(0,r.kt)("inlineCode",{parentName:"p"},"10MB")," and you should therefore keep your payloads well below that limit."),(0,r.kt)("h2",{id:"receiving-data-from-openfn"},"Receiving data from OpenFn"),(0,r.kt)("p",null,'To make it easy for users to connect to your application, it\'s highly recommended that you create a language-package with your required authentication and a set of simple, allowable actions nicely abstracted into "helper functions". See ',(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-dhis2"},"language-dhis2")," for an example of a language-package which creates a simpler interface for a traditional JSON-based REST api. Adaptors are written in Javascript and execute in Node. You can convert OpenFn's JSON into XML, or any other format before sending it to your application and you may make use of any node modules you'd like. See ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-postgresql"},"language-postgresql"),' for an example of an adaptor that connects directly to PostgreSQL databases using a popular NPM module called "pg".'),(0,r.kt)("p",null,"To receive data from OpenFn's generic ",(0,r.kt)("inlineCode",{parentName:"p"},"language-http")," adaptor, your application must allow either basic, token, or digest authenticated POST, PUT, or GET requests. (Though it is not advisable to create an API that requires GET requests to create or update data.)"))}l.isMDXComponent=!0}}]);