(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[1922],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=o.createContext({}),l=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,f=d["".concat(u,".").concat(m)]||d[m]||c[m]||a;return n?o.createElement(f,s(s({ref:t},p),{},{components:n})):o.createElement(f,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},78743:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return i},toc:function(){return u},default:function(){return p}});var o=n(22122),r=n(19756),a=(n(67294),n(3905)),s={title:"Inbox",sidebar_label:"Votre Inbox"},i={unversionedId:"build/inbox",id:"build/inbox",isDocsHomePage:!1,title:"Inbox",description:"Comment \xe7a marche",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/build/inbox.md",sourceDirName:"build",slug:"/build/inbox",permalink:"/fr/documentation/build/inbox",editUrl:"https://github.com/openfn/docs/edit/main/docs/build/inbox.md",version:"current",sidebar_label:"Votre Inbox",frontMatter:{title:"Inbox",sidebar_label:"Votre Inbox"},sidebar:"docs",previous:{title:"Credentials",permalink:"/fr/documentation/build/credentials"},next:{title:"Sources de donn\xe9es g\xe9n\xe9riques",permalink:"/fr/documentation/source-apps"}},u=[{value:"Comment \xe7a marche",id:"comment-\xe7a-marche",children:[]},{value:"<code>202/Accepted par rapport \xe0 201/Created</code>",id:"202accepted-par-rapport-\xe0-201created",children:[]},{value:"Synchronous vs. Asynchronous Processing",id:"synchronous-vs-asynchronous-processing",children:[]}],l={toc:u};function p(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"comment-\xe7a-marche"},"Comment \xe7a marche"),(0,a.kt)("p",null,"Sur la plateforme, chaque projet dispose de son propre inbox URL, quelque chose comme ",(0,a.kt)("inlineCode",{parentName:"p"},"https://www.openfn.org/inbox/54804f1a-4a70-4392-97cb-1f350e98e9c8"),". Cette grande cha\xeene de nombres et de lettres s'appelle un ",(0,a.kt)("inlineCode",{parentName:"p"},"UUID"),". C'est votre adresse, et l'\xab\xa0endroit\xa0\xbb sur le web o\xf9 vous enverrez les donn\xe9es pour le traitement par OpenFn si vous faites une int\xe9gration en temps r\xe9el ou \xab\xa0bas\xe9e sur des \xe9v\xe9nements\xa0\xbb."),(0,a.kt)("p",null,"Votre projet sera toujours \xe0 l'\xe9coute, et chaque fois qu'une requ\xeate HTTP est re\xe7ue \xe0 cette URL, nous r\xe9pondrons avec un ",(0,a.kt)("inlineCode",{parentName:"p"},"202/Accepted")," et commen\xe7ons \xe0 traiter les donn\xe9es envoy\xe9es soit dans le ",(0,a.kt)("inlineCode",{parentName:"p"},"body")," (corps) ou les ",(0,a.kt)("inlineCode",{parentName:"p"},"parameters")," (param\xe8tres) de cette requ\xeate."),(0,a.kt)("h2",{id:"202accepted-par-rapport-\xe0-201created"},(0,a.kt)("inlineCode",{parentName:"h2"},"202/Accepted par rapport \xe0 201/Created")),(0,a.kt)("p",null,"Vous avez probablement entendu parler de ",(0,a.kt)("inlineCode",{parentName:"p"},"200/OK")," ou d'autres \xab\xa0codes d'\xe9tat\xa0\xbb courants, mais la diff\xe9rence entre un ",(0,a.kt)("inlineCode",{parentName:"p"},"201")," et un ",(0,a.kt)("inlineCode",{parentName:"p"},"202")," est tr\xe8s int\xe9ressante d'un point de vue perspective d'int\xe9gration. ."),(0,a.kt)("p",null,"Le ",(0,a.kt)("inlineCode",{parentName:"p"},"201/Created")," signifie que nous avons termin\xe9 le traitement des donn\xe9es qui nous ont \xe9t\xe9 envoy\xe9es par le demandeur. Habituellement, cette r\xe9ponse est accompagn\xe9e d'une charge utile avec un nouvel ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," pour la ressource cr\xe9\xe9e. Ce n'est ",(0,a.kt)("em",{parentName:"p"},"pas")," ce que fait OpenFn, par contre nous envoyons un ",(0,a.kt)("inlineCode",{parentName:"p"},"202/Accept\xe9")," indiquant que votre requ\xeate \xe9tait acceptable et nous nous mettons au travail."),(0,a.kt)("p",null,":::astuce"),(0,a.kt)("p",null,"OpenFn envoie un ",(0,a.kt)("inlineCode",{parentName:"p"},"202/Accepted")," indiquant que votre requ\xeate a pass\xe9 notre validation initiale (c.\xe0.d. que les donn\xe9es sont du ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," valide ou du ",(0,a.kt)("inlineCode",{parentName:"p"},"XML")," analysable et que l'URL de l'inbox existe) et que nous l'avons mise en file d'attente pour traitement."),(0,a.kt)("p",null,":::"),(0,a.kt)("p",null,'En coulisses, nous avons mis en place un syst\xe8me de files d\'attente simple et durable qui nous emp\xeache de "laisser tomber" cet \xe9v\xe9nement \xe0 quelque moment que ce soit \xe0 partir de maintenant.'),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Nous le chargerons dans la base de donn\xe9es et bient\xf4t il appara\xeetra comme un nouveau \xab\xa0message\xa0\xbb enregistr\xe9 dans votre page \xab\xa0Inbox\xa0\xbb."),(0,a.kt)("li",{parentName:"ol"},"Nous v\xe9rifierons les triggers de tous les jobs actifs dans votre projet et si elle correspond \xe0 l'un de ces triggers, nous l'enverrons dans une autre file d'attente pour le job en cours."),(0,a.kt)("li",{parentName:"ol"},"Nous nous assurerons que votre projet est configur\xe9 correctement et que vous n'avez pas d\xe9pass\xe9 vos limites d'utilisation."),(0,a.kt)("li",{parentName:"ol"},"Nous allons commencer \xe0 ex\xe9cuter un job, qui peut lui-m\xeame faire des centaines de requ\xeates HTTP uniques vers d'autres points de terminaison."),(0,a.kt)("li",{parentName:"ol"},'Et finalement, nous vous ferons un rapport sur l\'\xe9tat de cette ex\xe9cution et bient\xf4t elle appara\xeetra comme un nouveau "run" dans votre page "Activity History".')),(0,a.kt)("p",null,"Depending on how many requests your job makes, how much data is being processed, and the response time of your other systems, all of this could take quite some time\u2014anywhere from ",(0,a.kt)("inlineCode",{parentName:"p"},"200ms")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"20 minutes"),"!"),(0,a.kt)("p",null,"If the system that sends the data to OpenFn needs to know whether all the operations in step 4 completed successfully (what do you count as a success with these various custom actions, by the way?) you should consider implementing a SAGA pattern, whereby after all this processing is complete you trigger another request back to the initial system reporting on the downstream tasks. This can be done in OpenFn with ",(0,a.kt)("a",{parentName:"p",href:"/documentation/jobs/multiple-operations"},"Flow Triggers"),"."),(0,a.kt)("h2",{id:"synchronous-vs-asynchronous-processing"},"Synchronous vs. Asynchronous Processing"),(0,a.kt)("p",null,"On ",(0,a.kt)("strong",{parentName:"p"},"OpenFn/platform"),", processing is asynchronous by default. Multiple complex workflows may be initiated, error handling and notifications all happen downstream."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"If you send data to OpenFn Inbox, you'll receive a ",(0,a.kt)("inlineCode",{parentName:"li"},"202")," if successful (and ",(0,a.kt)("inlineCode",{parentName:"li"},"502")," if we didn't receive your data/bad request)."),(0,a.kt)("li",{parentName:"ol"},'We\'ll then load it into the database and soon it will appear as a new "message" record in your "Inbox" page.'),(0,a.kt)("li",{parentName:"ol"},"We'll check the triggers for all the active jobs in your project and if it matches one of those triggers we'll send it to another queue for job running."),(0,a.kt)("li",{parentName:"ol"},"We'll make sure your project is configured properly and that you haven't exceeded your usage limits."),(0,a.kt)("li",{parentName:"ol"},"We'll start executing a job run, which may itself may hundreds of unique HTTP requests to other endpoints."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("em",{parentName:"li"},"If you want to then send an update back to the source system... you may configure another job to send requests and updates back to the triggering source system."))),(0,a.kt)("p",null,"In ",(0,a.kt)("strong",{parentName:"p"},"OpenFn/microservice")," or using open-source tools, you could create a synchronous system. We've created a way to set up inbox endpoints as \"synchronous\", meaning they'll actually hold a connection open ",(0,a.kt)("em",{parentName:"p"},"until")," all of the processing above is completed, and then respond with a ",(0,a.kt)("inlineCode",{parentName:"p"},"2XX"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"4xx"),", or ",(0,a.kt)("inlineCode",{parentName:"p"},"5XX"),". This is not recommended for high volume systems, but may be a requirement for some implementations; the sprit of ",(0,a.kt)("strong",{parentName:"p"},"OpenFn/microservice")," is to give as much control as possible to whoever is deploying it on their servers."))}p.isMDXComponent=!0}}]);