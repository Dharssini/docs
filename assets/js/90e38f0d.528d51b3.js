(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{178:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return u}));var n=a(3),o=a(8),r=(a(0),a(266)),i={title:"Project Walk-through"},c={unversionedId:"build/example-build",id:"build/example-build",isDocsHomePage:!1,title:"Project Walk-through",description:"On this page, we will demonstrate how to build a real world integration using",source:"@site/docs/build/example-build.md",slug:"/build/example-build",permalink:"/documentation/build/example-build",editUrl:"https://github.com/openfn/docs/edit/main/docs/build/example-build.md",version:"current",sidebar:"docs",previous:{title:"Quick-start",permalink:"/documentation/getting-started/quick-start"},next:{title:"Introduction to Jobs",permalink:"/documentation/build/jobs"}},s=[{value:"Step 1 - Login to your project dashboard",id:"step-1---login-to-your-project-dashboard",children:[]},{value:"Step 2 - Add a new project",id:"step-2---add-a-new-project",children:[]},{value:"Step 3 - Enter your new project space",id:"step-3---enter-your-new-project-space",children:[]},{value:"Step 4 - Connect your source application(s)",id:"step-4---connect-your-source-applications",children:[]},{value:"Step 5 - Connect your destination application(s)",id:"step-5---connect-your-destination-applications",children:[]},{value:"Step 6 - Create your job trigger(s)",id:"step-6---create-your-job-triggers",children:[]},{value:"Step 7 - Create your job(s)",id:"step-7---create-your-jobs",children:[]},{value:"Step 8 - Activate &quot;Auto-Process&quot;",id:"step-8---activate-auto-process",children:[]},{value:"Step 9 - Testing your automation",id:"step-9---testing-your-automation",children:[]}],l={toc:s};function u(e){var t=e.components,i=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},l,i,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"On this page, we will demonstrate how to build a real world integration using\nthe OpenFn platform."),Object(r.b)("p",null,"In this sample integration project, a KoboToolBox form submission will trigger\nOpenFn jobs which do the following in real-time:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Create a new contact in ",Object(r.b)("a",{parentName:"li",href:"https://www.salesforce.com"},"Salesforce")),Object(r.b)("li",{parentName:"ol"},"Add a new tracked entity instance to ",Object(r.b)("a",{parentName:"li",href:"https://www.dhis2.org"},"dhis2")),Object(r.b)("li",{parentName:"ol"},"A new row created in ",Object(r.b)("a",{parentName:"li",href:"https://sheets.google.com"},"Google Sheets"))),Object(r.b)("h3",{id:"step-1---login-to-your-project-dashboard"},"Step 1 - Login to your project dashboard"),Object(r.b)("p",null,"Create an account on OpenFn and login to your project dashboard."),Object(r.b)("p",null,"If this is the first time you are logging into OpenFn, you will notice that a\nsample project has already been created for you."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Project Dashboard on 1st Login",src:a(427).default})),Object(r.b)("h3",{id:"step-2---add-a-new-project"},"Step 2 - Add a new project"),Object(r.b)("p",null,"Add a new project that will contain your desired automations/workflow."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Add new project",src:a(428).default})),Object(r.b)("h3",{id:"step-3---enter-your-new-project-space"},"Step 3 - Enter your new project space"),Object(r.b)("p",null,"Click ",Object(r.b)("inlineCode",{parentName:"p"},"view")," on your new project to get started."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Click view",src:a(429).default})),Object(r.b)("h3",{id:"step-4---connect-your-source-applications"},"Step 4 - Connect your source application(s)"),Object(r.b)("p",null,"Connect KoboToolbox to your OpenFn inbox, so that every time a survey form is\nsubmitted, OpenFn receives a copy of it."),Object(r.b)("p",null,"Copy your OpenFn inbox url and then register a new REST service in KoboToolbox."),Object(r.b)("p",null,Object(r.b)("img",{alt:"inbox url",src:a(430).default})),Object(r.b)("p",null,"For our example, the REST Service information we entered looks like this:"),Object(r.b)("p",null,Object(r.b)("img",{alt:"kobo rest service",src:a(431).default})),Object(r.b)("h3",{id:"step-5---connect-your-destination-applications"},"Step 5 - Connect your destination application(s)"),Object(r.b)("p",null,"Add your credentials for the destination services that you would like the\nKoboToolbox data to flow to. Navigate to the ",Object(r.b)("inlineCode",{parentName:"p"},"credentials")," section in your\nproject space and click the ",Object(r.b)("inlineCode",{parentName:"p"},"+")," on the bottom right of the screen."),Object(r.b)("p",null,Object(r.b)("img",{alt:"add credential",src:a(432).default})),Object(r.b)("h4",{id:"add-salesforce-credentials"},"Add SalesForce credentials"),Object(r.b)("p",null,Object(r.b)("img",{alt:"Salesforce Credentials",src:a(433).default})),Object(r.b)("h4",{id:"add-dhis2-credentials"},"Add dhis2 credentials"),Object(r.b)("p",null,Object(r.b)("img",{alt:"dhis2 Credentials",src:a(434).default})),Object(r.b)("h4",{id:"add-google-sheets-credentials"},"Add Google Sheets credentials"),Object(r.b)("p",null,Object(r.b)("img",{alt:"google sheets credentials",src:a(435).default})),Object(r.b)("h3",{id:"step-6---create-your-job-triggers"},"Step 6 - Create your job trigger(s)"),Object(r.b)("p",null,"Create your trigger for the automation."),Object(r.b)("p",null,"Navigate to the ",Object(r.b)("inlineCode",{parentName:"p"},"trigger")," section in your project."),Object(r.b)("p",null,Object(r.b)("img",{alt:"navigate to trigger",src:a(436).default})),Object(r.b)("p",null,"Enter your desired trigger's configuration. :::important Note, that your project\nspace can have several different triggers that govern when/if your jobs are\nperformed. ::: In this example, we would like for our jobs to trigger whenever a\nnew Kobo form is submitted."),Object(r.b)("p",null,Object(r.b)("img",{alt:"trigger example",src:a(437).default})),Object(r.b)("h3",{id:"step-7---create-your-jobs"},"Step 7 - Create your job(s)"),Object(r.b)("p",null,"Create your project's jobs."),Object(r.b)("h4",{id:"salesforce"},"Salesforce"),Object(r.b)("p",null,Object(r.b)("img",{alt:"salesforce job",src:a(438).default})),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"create('Contact', {\n  FirstName: dataValue('body.Patient_name'),\n  LastName: dataValue('body.Last_Name_of_Patient'),\n  Age__c: dataValue('body.Age'),\n  Sex__c: dataValue('body.Sex'),\n  Case_ID__c: dataValue('body.National_ID'),\n  Comments__c: dataValue('body.Comments'),\n});\n")),Object(r.b)("h4",{id:"dhis2"},"dhis2"),Object(r.b)("p",null,Object(r.b)("img",{alt:"dhis2 job",src:a(439).default})),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"createTEI({\n  orgUnit: 'GD7TowwI46c',\n  trackedEntityType: 'MCPQUTHX1Ze',\n  attributes: [\n    {\n      attribute: 'he05i8FUwu3', // case id\n      value: dataValue('body._id'),\n    },\n    {\n      attribute: 'sB1IHYu2xQT', // first name\n      value: dataValue('body.Patient_name'),\n    },\n    {\n      attribute: 'ENRjVGxVL6l', // last name\n      value: dataValue('body.Last_Name_of_Patient'),\n    },\n    {\n      attribute: 'Rv8WM2mTuS5', // age\n      value: dataValue('body.Age'),\n    },\n  ],\n  enrollments: [\n    {\n      orgUnit: 'GD7TowwI46c',\n      program: 'DM9n1bUw8W8',\n      programState: 'sAV9jAajr8x',\n      enrollmentDate: dataValue('body.Date'),\n      incidentDate: dataValue(\n        'body.Covid_19_suspected_criteria/Speciman_Collection_date'\n      ),\n    },\n  ],\n});\n")),Object(r.b)("h4",{id:"google-sheets"},"Google Sheets"),Object(r.b)("p",null,Object(r.b)("img",{alt:"google sheets job",src:a(440).default})),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"appendValues({\n  spreadsheetId: '1EFkY4zD4qqxnJdH-QaeasKd1zXC-1sNKpEg08W-3sT0',\n  range: 'COVID-19 Cases!A2',\n  values: state => {\n    const kobo = state.data.body;\n\n    console.log('Submission data: ' + JSON.stringify(kobo, null, 2));\n\n    return [\n      [\n        kobo['National_ID'],\n        kobo['Patient_name'],\n        kobo['Last_Name_of_Patient'],\n        kobo['Sex'],\n        kobo['Age'],\n        kobo['Comments'],\n        kobo['Date'],\n      ],\n    ];\n  },\n});\n")),Object(r.b)("h3",{id:"step-8---activate-auto-process"},'Step 8 - Activate "Auto-Process"'),Object(r.b)("p",null,"Turn on auto-process for all of this automation's jobs, so that they\nautomatically run each time a new kobo form is submitted.\n",Object(r.b)("img",{alt:"dhis2 job",src:a(441).default})),Object(r.b)("h3",{id:"step-9---testing-your-automation"},"Step 9 - Testing your automation"),Object(r.b)("p",null,"Now it's time to test your integration. (Work in progress...)"))}u.isMDXComponent=!0},266:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return f}));var n=a(0),o=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},b=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},p=o.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=u(a),p=n,f=b["".concat(i,".").concat(p)]||b[p]||d[p]||r;return a?o.a.createElement(f,c(c({ref:t},l),{},{components:a})):o.a.createElement(f,c({ref:t},l))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var l=2;l<r;l++)i[l]=a[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"},427:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/1.1_new_account_dashboard-9b48511aae2b8b63fb7d5d784021ac43.png"},428:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/2.1_add_new_project-340bc81d856ff7d3f1d8cf39776267c9.gif"},429:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/3.1_click_view-a3c861393091d69719fdee5794cf47ce.gif"},430:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/4.1_inbox_url_copy_paste-afc34cedea66ca4327f097260a6689b0.gif"},431:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/4.2_rest_service_kobo-c5c76e674503c6fed8af1281790bae7b.png"},432:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/5.1_add_credential-576a996e08d909f0a33634af3d16a03d.gif"},433:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/5.2_salesforce_credentials-e91c6c22d8d70838b540f9645c5de145.png"},434:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/5.3_dhis2_credentials-4ad6f7b2e1718776c79a058edab0f994.png"},435:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/5.4_google_sheets_credential-aaf879654ac328f66b69cc7e824938eb.gif"},436:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/6.1_navigate_to_trigger-e6ad1cc76c67af439efdfb5743f970de.gif"},437:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/6.2_trigger_example-7959e727a89a5a466623a12c4891fef0.png"},438:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/7.1_salesforce_job-2fba37e30244f4338f6c9637cf972a4e.png"},439:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/7.2_dhis2_job-530a5cdf8af0b72da4834a76f4972af8.png"},440:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/7.3_google_sheet_job-93b4654dc2b916890ef7642a9720d00a.png"},441:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/8.1_autoprocess_on-e51c96f48845ca3cc6e172ba55f49f9c.gif"}}]);