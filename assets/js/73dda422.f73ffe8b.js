(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[9066],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,f=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(f,i(i({ref:t},c),{},{components:n})):a.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6625:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return l},default:function(){return c}});var a=n(22122),o=n(19756),r=(n(67294),n(3905)),i={title:"Salesforce"},s={unversionedId:"apps/salesforce",id:"apps/salesforce",isDocsHomePage:!1,title:"Salesforce",description:"App Overview",source:"@site/docs/apps/salesforce.md",sourceDirName:"apps",slug:"/apps/salesforce",permalink:"/documentation/apps/salesforce",editUrl:"https://github.com/openfn/docs/edit/main/docs/apps/salesforce.md",version:"current",frontMatter:{title:"Salesforce"},sidebar:"docs",previous:{title:"Power BI",permalink:"/documentation/apps/powerbi"},next:{title:"SurveyCTO",permalink:"/documentation/apps/survey-cto"}},l=[{value:"App Overview",id:"app-overview",children:[{value:"Data Model",id:"data-model",children:[]}]},{value:"Integration Use Cases",id:"integration-use-cases",children:[]},{value:"APIs &amp; Integration Options",id:"apis--integration-options",children:[]},{value:"App Setup &amp; Integration Tips",id:"app-setup--integration-tips",children:[{value:"Field API Names",id:"field-api-names",children:[]},{value:"Mapping and Design Considerations",id:"mapping-and-design-considerations",children:[]},{value:"Salesforce Credentials",id:"salesforce-credentials",children:[]}]},{value:"Common Errors",id:"common-errors",children:[]},{value:"OpenFn Adaptors",id:"openfn-adaptors",children:[]},{value:"Example Implementations",id:"example-implementations",children:[]}],p={toc:l};function c(e){var t=e.components,i=(0,o.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"app-overview"},"App Overview"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.salesforce.com/"},"Salesforce")," is a cloud-based ",(0,r.kt)("strong",{parentName:"p"},"customer\nrelationship management (CRM)")," platform that hosts applications that customers\ncan access online. Beyond its core CRM product, Salesforce offers a customizable\nplatform for configuring relational databases, business automation, web portals,\nreporting tools, and robust applications for supporting a wide range of use\ncases."),(0,r.kt)("h3",{id:"data-model"},"Data Model"),(0,r.kt)("p",null,'At its core, Salesforce is a relational database. It has some out-of-box or\n"standard" data tables and features, but can be easily extended to include\n"custom" metadata configuration and other app features.'),(0,r.kt)("p",null,"Salesforce data is stored in ",(0,r.kt)("strong",{parentName:"p"},"individual records (rows)")," and organized within\n",(0,r.kt)("strong",{parentName:"p"},"objects (tables)"),". Record attributes are captured in ",(0,r.kt)("strong",{parentName:"p"},"fields (columns)"),'.\nThe data model is configurable, but there are some standard objects that are\nprovided. Note that naming conventions for custom and standard metadata may\ndiffer (e.g., all "custom" field names include the suffix ',(0,r.kt)("inlineCode",{parentName:"p"},"__c")," like\n",(0,r.kt)("inlineCode",{parentName:"p"},"CustomField__c"),")."),(0,r.kt)("p",null,"Learn more about how data is structured in Salesforce at the links below:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"How data is organized in Salesforce:\n",(0,r.kt)("a",{parentName:"li",href:"https://help.salesforce.com/s/articleView?id=sf.basics_organize_data.htm&type=5"},"https://help.salesforce.com/s/articleView?id=sf.basics_organize_data.htm&type=5")),(0,r.kt)("li",{parentName:"ul"},"Salesforce objects: ",(0,r.kt)("a",{parentName:"li",href:"https://www.salesforcetutorial.com/salesforce-objects/"},"https://www.salesforcetutorial.com/salesforce-objects/"))),(0,r.kt)("h2",{id:"integration-use-cases"},"Integration Use Cases"),(0,r.kt)("p",null,"Salesforce may be used to manage an organization's programs, operations,\nfundraising, and more. Therefore integrations with 3rd-party apps is a common\nrequirement."),(0,r.kt)("p",null,"Example user stories:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"As a program or M&E manager working in areas with limited internet\nconnectivity, I would like to collect data on a mobile applicaiton that\nsupports offline data capture, but then sync the data collected to Salesforce\nso that I can centrally monitor field activities and analyze data collected to\nevaluate program impact."),(0,r.kt)("li",{parentName:"ul"},"As a fundraiser at an NGO, I would like to see all donor information tracked\nin Salesforce so that I can better monitor fundraising activities, nurture\nrelationships with all funders, and manage campaigns.")),(0,r.kt)("h2",{id:"apis--integration-options"},"APIs & Integration Options"),(0,r.kt)("p",null,"Salesforce has a rich ecosystem of developers and ready-made applications. See\nthe ",(0,r.kt)("a",{parentName:"p",href:"https://appexchange.salesforce.com/"},"Salesforce App Exchange")," for existing\napps and integrations custom-made for Salesforce. If existing applications do\nnot meet your functional or budget requirements, leverage Salesforce's robust\nAPIs to configure a custom integration."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"APIs:")," Salesforce has a robust set of RESTful APIs that support a wide\nrange of operations. For connecting with these APIs, including the\n",(0,r.kt)("inlineCode",{parentName:"li"},"Bulk API"),", OpenFn has developed a robust API adaptor for quicker integration\nsetup - see\n",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpenFn/language-salesforce"},(0,r.kt)("inlineCode",{parentName:"a"},"language-salesforce")),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Webhook:")," By configuring\n",(0,r.kt)("a",{parentName:"li",href:"https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_om_outboundmessaging_understanding.htm"},(0,r.kt)("inlineCode",{parentName:"a"},"Outbound Messages")),"\nthat can be sent via criteria-based ",(0,r.kt)("inlineCode",{parentName:"li"},"Workflow Rules"),", Salesforce Admins can\nconfigure real-time notifications to be sent to OpenFn (or any endpoint URL)\nwhen a specific event occurs. (E.g., every time a new ",(0,r.kt)("inlineCode",{parentName:"li"},"Contact")," is created,\nsend an Outbound Message to OpenFn to trigger a data sync between that SF\n",(0,r.kt)("inlineCode",{parentName:"li"},"Contact")," record and another data system.)")),(0,r.kt)("h2",{id:"app-setup--integration-tips"},"App Setup & Integration Tips"),(0,r.kt)("p",null,"Salesforce provides robust online documentation (see\n",(0,r.kt)("a",{parentName:"p",href:"https://developer.salesforce.com/docs"},"Developer Docs"),") and tutorials (see\n",(0,r.kt)("a",{parentName:"p",href:"https://trailhead.salesforce.com/en?utm_campaign=13515883882&utm_content=125227478042&utm_medium=paid&utm_source=google_sem"},"Trailheads"),")\nfor learning about the platform. See below for helpful tips for your next\nSalesforce integration project."),(0,r.kt)("h3",{id:"field-api-names"},"Field API Names"),(0,r.kt)("p",null,"Salesforce ",(0,r.kt)("strong",{parentName:"p"},"field API names")," (unique names for each piece of metadata - e.g.,\n",(0,r.kt)("inlineCode",{parentName:"p"},"PatientID__c"),") should be referenced in OpenFn integrations, not ",(0,r.kt)("strong",{parentName:"p"},"field\nlabels")," (business-friendly label that the end user sees - e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"Patient ID"),")\n",(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/80456839/128650593-343090da-7f12-468a-aa51-1f87f1cf9f34.png",alt:"image"}),"."),(0,r.kt)("p",null,"To view the Salesforce API field names, navigate to the Salesforce backend. Via\nthe web app, select ",(0,r.kt)("inlineCode",{parentName:"p"},"Setup")," from the top naviagation menu to browse the\nSalesforce backend settings, metadata configuration, object and field names,\netc."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the ",(0,r.kt)("inlineCode",{parentName:"li"},"Classic")," view, search for ",(0,r.kt)("inlineCode",{parentName:"li"},"Object")," in the left-hand ",(0,r.kt)("inlineCode",{parentName:"li"},"Setup")," search box\nwithout hitting Enter. From the quick results, select ",(0,r.kt)("inlineCode",{parentName:"li"},"Create -> Objects"),".\nThis takes you to all the custom objects. Select an object and you'll see all\nthe fields and relationships on the object."),(0,r.kt)("li",{parentName:"ul"},"You can also easily view Salesforce API names via the front-end UI by\ndownloading the Chrome extension\n",(0,r.kt)("a",{parentName:"li",href:"https://chrome.google.com/webstore/detail/salesforce-show-api-name/dcfecmnffjopafbbbaepgopfcphnoham"},"Salesforce Show API Name"),".\nFollow the instructions for adding it to Chrome and use it to display API\nnames without going to Setup.")),(0,r.kt)("h3",{id:"mapping-and-design-considerations"},"Mapping and Design Considerations"),(0,r.kt)("h4",{id:"external-identifiers"},"External Identifiers"),(0,r.kt)("p",null,"Individual fields can be configured as ",(0,r.kt)("inlineCode",{parentName:"p"},"external identifiers")," to search for a\nrecord via a the API/an external app and to help prevent duplicate records from\nbeing created in Salesforce. To enable this setting on an individual field,\nensure ",(0,r.kt)("inlineCode",{parentName:"p"},"External ID")," is checked on the field settings. Learn more about external\nidentifiers in Salesforce at\n",(0,r.kt)("a",{parentName:"p",href:"https://www.infallibletechie.com/2014/11/what-is-external-id-in-salesforce.html"},"https://www.infallibletechie.com/2014/11/what-is-external-id-in-salesforce.html"),"\n",(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/80456839/128650680-e10fa395-bddb-45bd-bd6c-3a9dda8998f8.png",alt:"image"})),(0,r.kt)("h4",{id:"relationships-and-lookup-fields"},"Relationships and Lookup Fields"),(0,r.kt)("p",null,"When mapping ",(0,r.kt)("inlineCode",{parentName:"p"},"lookup"),' fields (which are similar to database "foreign keys") in\nSalesforce, use the external identifier of the related record. Examples:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Say there is a ",(0,r.kt)("inlineCode",{parentName:"li"},"Survey__c")," object in Salesforce with a lookup field called\n",(0,r.kt)("inlineCode",{parentName:"li"},"Respondent__c")," that looks up to the ",(0,r.kt)("inlineCode",{parentName:"li"},"Person__c"),"object with external ID\n",(0,r.kt)("inlineCode",{parentName:"li"},"PersonID__c"),". To populate the ",(0,r.kt)("inlineCode",{parentName:"li"},"Survey__c.Respondent__c")," lookup field, our\nmapping will look as follows:\n",(0,r.kt)("inlineCode",{parentName:"li"},"Respondent__r.PersonID__c: {personExtIdFromSourceData}"),"."),(0,r.kt)("li",{parentName:"ul"},"If the metadata are standard objects or fields, then you do not need the ",(0,r.kt)("inlineCode",{parentName:"li"},"__r"),"\nto indicate there is a relationship. Example mapping:\n",(0,r.kt)("inlineCode",{parentName:"li"},"Account.CustomAccountID__c: {AcctIdFromSourceData}")),(0,r.kt)("li",{parentName:"ul"},"If using the OpenFn adaptor, you may also choose to leverage the\n",(0,r.kt)("inlineCode",{parentName:"li"},"relationship(...)")," helper function in your job. Example mapping:\n",(0,r.kt)("inlineCode",{parentName:"li"},"relationship('Respondent__r', 'PersonID__c', dataValue('sourceField'))"))),(0,r.kt)("h4",{id:"picklist-fields"},"Picklist fields"),(0,r.kt)("p",null,"As you design your integration and map data elements between systems, make sure\nthat option values for ",(0,r.kt)("strong",{parentName:"p"},"picklistt")," fields also match the data from your\nconnected application. If your other app's field value options do not match\nSalesforce picklist values, you should consider (1) transforming or re-labeling\nthe values received from the source system before sending to Salesforce, or (2)\nadd new ",(0,r.kt)("inlineCode",{parentName:"p"},"picklist values")," to Salesforce to align the metadata between systems."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Example:")," When mapping a field that specifies ",(0,r.kt)("inlineCode",{parentName:"p"},"sex"),", the source system could\nhave the options ",(0,r.kt)("inlineCode",{parentName:"p"},'"male", "female", "other"')," and the destination system has the\noptions ",(0,r.kt)("inlineCode",{parentName:"p"},'"M", "F", "Other"'),". The mappings would need to specify how to align the\nvalues (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"M: male, F: female"),")."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Multi-Select Picklist fields"),": If mapping to a Salesforce\n",(0,r.kt)("inlineCode",{parentName:"p"},"multi-select picklist field"),", note that multiple values should be formatted as\nsemicolon-separated strings (e.g.,\n",(0,r.kt)("inlineCode",{parentName:"p"},"Services__c: 'Food;Counselling;Medical_Aid"),")."),(0,r.kt)("h3",{id:"salesforce-credentials"},"Salesforce Credentials"),(0,r.kt)("p",null,"Salesforce requires a username, password, login URL, and security token to\nauthenticate via a user. ",(0,r.kt)("strong",{parentName:"p"},"Note every time you reset the user's password, the\nsecurity token will reset and you need to update the Credential record used in\nyour OpenFn job.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Credentials Menu",src:n(49290).Z})),(0,r.kt)("p",null,'A "Salesforce" Credential record should include:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Username"),(0,r.kt)("li",{parentName:"ul"},"Password"),(0,r.kt)("li",{parentName:"ul"},'Security Token (Salesforce will email you this when you set your password. If\nyou cannot find "security token" in your inbox, see below for how to reset\nit.)'),(0,r.kt)("li",{parentName:"ul"},"Login URL: If a production system, use ",(0,r.kt)("inlineCode",{parentName:"li"},"https://login.salesforce.com/")," (unless\nyou have a custom domain ",(0,r.kt)("inlineCode",{parentName:"li"},"https://domainName.salesforce.com/"),"). For sandbox\nenvironments, ",(0,r.kt)("inlineCode",{parentName:"li"},"https://test.salesforce.com/"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Salesforce Cred",src:n(23980).Z})),(0,r.kt)("p",null,"For ",(0,r.kt)("strong",{parentName:"p"},"OpenFn/devtools")," or ",(0,r.kt)("strong",{parentName:"p"},"OpenFn/engine")," the raw JSON of the credential for\ninclusion in ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," should look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"configuration": {\n  "loginUrl": "https://login.salesforce.com/",\n  "username": "openfn@salesforce.org",\n  "password": "testing123",\n  "securityToken": "Mh4gkye9BVZA9dDjD61Fnd1ba"\n},\n')),(0,r.kt)("h4",{id:"resetting-your-security-token"},"Resetting Your Security Token"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.salesforce.com/articleView?id=sf.user_security_token.htm&type=5"},"See instructions here"),"\nor below screenshot. Once reset, you will receive an email from Salesforce.\nPlease save this ",(0,r.kt)("inlineCode",{parentName:"p"},"security token")," in your OpenFn ",(0,r.kt)("inlineCode",{parentName:"p"},"Credential"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Token Reset",src:n(69920).Z})),(0,r.kt)("h2",{id:"common-errors"},"Common Errors"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"INVALID_FIELD: Foreign key external id not found"),": This error message\nusually means that the parent record for an object has not been synced. For\nexample, if one tries uploading participants for an event that has not yet\nbeen synced."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"TypeError [Error]"),":This error usually mean that the job received a part of\nthe message that it wasn't expecting, or there is a syntax error in your job\ncode. It means that the job needs to be updated to know how to handle the\nmessage."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"NOT_FOUND: Provided external ID field does not exist or is not accessible"),":\nThis error usually means that ",(0,r.kt)("inlineCode",{parentName:"li"},"External ID")," has not been checked in the field\nsettings in Salesforce. See Mapping and Design Considerations section above."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"MULTIPLE_CHOICES: Multiple records found"),": This error means that Salesforce\nhas found multiple records with the ",(0,r.kt)("inlineCode",{parentName:"li"},"External ID")," that was specified."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"REQUIRED_FIELD_MISSING: Required fields are missing"),": This error usually\nmeans that a field which is required on the object being updated has not been\nset.")),(0,r.kt)("h2",{id:"openfn-adaptors"},"OpenFn Adaptors"),(0,r.kt)("p",null,"OpenFn has a robust\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenFn/language-salesforce"},(0,r.kt)("inlineCode",{parentName:"a"},"language-salesforce"))," adaptor\nwith a range of helper functions for common CRUD & upsert operations, and for\naccessing the Salesforce bulk API."),(0,r.kt)("h2",{id:"example-implementations"},"Example Implementations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"MiracleFeet (CommCare-to-Salesforce sync):\n",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpenFn/miracle-feet"},"https://github.com/OpenFn/miracle-feet")),(0,r.kt)("li",{parentName:"ul"},"Lwala (CommCare-Salesforce 2-way sync): ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpenFn/lwala"},"https://github.com/OpenFn/lwala")),(0,r.kt)("li",{parentName:"ul"},"GRS CommCare - Salesforce sync: ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpenFn/grassroot-soccer"},"https://github.com/OpenFn/grassroot-soccer"))))}c.isMDXComponent=!0},49290:function(e,t,n){"use strict";t.Z=n.p+"assets/images/credentials-864839c91f9940b590649a47da35fc00.png"},23980:function(e,t,n){"use strict";t.Z=n.p+"assets/images/salesforce-cred-5d5b9ada850c8a58fc99d009ab4835a4.png"},69920:function(e,t,n){"use strict";t.Z=n.p+"assets/images/security-token-67feb0a8803f27c60871f43472947981.png"}}]);