(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{252:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return o})),a.d(n,"metadata",(function(){return l})),a.d(n,"toc",(function(){return _})),a.d(n,"default",(function(){return s}));var t=a(3),r=a(8),i=(a(0),a(300)),o={title:"Create Person in SF (Sandbox) with salesforce",sidebar_label:"Create Person in SF (Sandbox)",id:"Create Person in SF Sandbox-2016-12-29",keywords:["library","job","expression","salesforce","create","dataValue","field","fields"]},l={unversionedId:"jobs/auto/Create Person in SF Sandbox-2016-12-29",id:"jobs/auto/Create Person in SF Sandbox-2016-12-29",isDocsHomePage:!1,title:"Create Person in SF (Sandbox) with salesforce",description:"This job was provided by an OpenFn.org user via the job library API.",source:"@site/library/jobs/auto/Create Person in SF Sandbox-2016-12-29.md",sourceDirName:"jobs/auto",slug:"/jobs/auto/Create Person in SF Sandbox-2016-12-29",permalink:"/library/jobs/auto/Create Person in SF Sandbox-2016-12-29",version:"current",sidebar_label:"Create Person in SF (Sandbox)",frontMatter:{title:"Create Person in SF (Sandbox) with salesforce",sidebar_label:"Create Person in SF (Sandbox)",id:"Create Person in SF Sandbox-2016-12-29",keywords:["library","job","expression","salesforce","create","dataValue","field","fields"]},sidebar:"library",previous:{title:"Create Distribution & Referral in SF with salesforce",permalink:"/library/jobs/auto/Create Distribution & Referral in SF-2020-06-19"},next:{title:"Create Person in SF with salesforce",permalink:"/library/jobs/auto/Create Person in SF-2019-02-25"}},_=[{value:"Metadata",id:"metadata",children:[]},{value:"Key Functions",id:"key-functions",children:[]},{value:"Expression",id:"expression",children:[]}],d={toc:_};function s(e){var n=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(t.a)({},d,a,{components:n,mdxType:"MDXLayout"}),Object(i.b)("em",null,"This job was provided by an OpenFn.org user via the job library API."),Object(i.b)("h2",{id:"metadata"},"Metadata"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Name: Create Person in SF (Sandbox)"),Object(i.b)("li",{parentName:"ul"},"Adaptor: ",Object(i.b)("inlineCode",{parentName:"li"},"@openfn/language-salesforce")),Object(i.b)("li",{parentName:"ul"},"Adaptor Version: ",Object(i.b)("inlineCode",{parentName:"li"},"v1.3.2")),Object(i.b)("li",{parentName:"ul"},"Created over 4 years ago"),Object(i.b)("li",{parentName:"ul"},"Updated about 4 hours ago")),Object(i.b)("h2",{id:"key-functions"},"Key Functions"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"create"),", ",Object(i.b)("inlineCode",{parentName:"p"},"dataValue"),", ",Object(i.b)("inlineCode",{parentName:"p"},"field"),", ",Object(i.b)("inlineCode",{parentName:"p"},"fields")),Object(i.b)("h2",{id:"expression"},"Expression"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js"},"create(\n  'Person__c',\n  fields(\n    field('Name', dataValue('$.form.Basic_Information.Person_Name')),\n    relationship('RecordType', 'Name', state => {\n      return dataValue('$.form.Basic_Information.Record_Type')(state)\n        .toString()\n        .replace(/_/g, ' ');\n    }),\n    /*relationship(\"Area__r\",\"CommCare_User_ID__c\",dataValue(\"form.area\")),\n  field(\"Active_in_HAWI__c\",state =>{\n    if(dataValue(\"$.form.Basic_Information.HAWI_Status\")(state)==\"Yes\"){\n      return(\"Yes\");\n    }\n  }),*/\n    field('HAWI_Registrant__c', state => {\n      if (dataValue('$.form.Basic_Information.HAWI_Status')(state) == 'Yes') {\n        return 'Yes';\n      }\n    }),\n    field('HAWI_Registrant__c', state => {\n      if (dataValue('$.form.Basic_Information.HAWI_Status')(state) == 'Yes') {\n        return 'Yes';\n      }\n    }),\n    field('Active_in_Thrive_Thru_5__c', state => {\n      if (\n        dataValue('$.form.Basic_Information.Record_Type')(state)\n          .toString()\n          .replace(/_/g, ' ') == 'Child' &&\n        dataValue('$.form.Basic_Information.TT5_Status')(state) == 'Yes'\n      ) {\n        return 'Yes';\n      }\n    }),\n    field('Thrive_Thru_5_Registrant__c', state => {\n      if (\n        dataValue('$.form.Basic_Information.Record_Type')(state)\n          .toString()\n          .replace(/_/g, ' ') == 'Child' &&\n        dataValue('$.form.Basic_Information.TT5_Status')(state) == 'Yes'\n      ) {\n        return 'Yes';\n      }\n    }),\n    field('Active_TT5_Mother__c', state => {\n      if (\n        dataValue('$.form.Basic_Information.Record_Type')(state)\n          .toString()\n          .replace(/_/g, ' ') == 'Female Adult' &&\n        dataValue('$.form.Basic_Information.TT5_Status')(state) == 'Yes'\n      ) {\n        return 'Yes';\n      }\n    }),\n    field('Enrollment_Date__c', state => {\n      if (dataValue('$.form.Basic_Information.TT5_Status')(state) == 'Yes') {\n        return dataValue('$.metadata.timeEnd')(state);\n      }\n    }),\n    field('HAWI_Enrollment_Date__c', state => {\n      if (dataValue('$.form.Basic_Information.HAWI_Status')(state) == 'Yes') {\n        return dataValue('$.metadata.timeEnd')(state);\n      }\n    }),\n    field('LMP__c', dataValue('$.form.TT5.Child_Information.ANCs.LMP')),\n    field('Source__c', true),\n    field('CommCare_ID__c', dataValue('$.form.subcase_0.case.@case_id')),\n    field('Date_of_Birth__c', dataValue('$.form.Basic_Information.DOB')),\n    field('Gender__c', dataValue('$.form.Basic_Information.Final_Gender')),\n    field(\n      'Marital_Status__c',\n      dataValue('$.form.Basic_Information.Marital_Status')\n    ),\n    field(\n      'Telephone__c',\n      dataValue('$.form.Basic_Information.Contact_Info.contact_phone_number')\n    ),\n    field(\n      'Next_of_Kin__c',\n      dataValue('$.form.Basic_Information.Contact_Info.Next_of_Kin')\n    ),\n    field(\n      'Next_of_Kin_Phone__c',\n      dataValue('$.form.Basic_Information.Contact_Info.next_of_kin_phone')\n    ),\n    field('Client_Status__c', 'Active'),\n    field(\n      'Ever_on_Family_Planning__c',\n      dataValue('$.form.Basic_Information.Ever_on_Family_Planning')\n    ),\n    field(\n      'Family_Planning__c',\n      dataValue('$.form.Basic_Information.Currently_on_family_planning')\n    ),\n    field(\n      'Family_Planning_Method__c',\n      dataValue('$.form.Basic_Information.Family_Planning_Method')\n    ),\n    field('ANC_1__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_1')),\n    field('ANC_2__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_2')),\n    field('ANC_3__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_3')),\n    field('ANC_4__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_4')),\n    field('ANC_5__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_5')),\n    field(\n      'BCG__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.BCG')\n    ),\n    field(\n      'OPV_0__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.OPV_0')\n    ),\n    field(\n      'OPV_1__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.OPV_PCV_Penta_1')\n    ),\n    field(\n      'OPV_2__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.OPV_PCV_Penta_2')\n    ),\n    field(\n      'OPV_3__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.OPV_PCV_Penta_3')\n    ),\n    field(\n      'Measles_6__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.Measles_6')\n    ),\n    field(\n      'Measles_9__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.Measles_9')\n    ),\n    field(\n      'Measles_18__c',\n      dataValue('$.form.TT5.Child_Information.Immunizations.Measles_18')\n    ),\n    field(\n      'Exclusive_Breastfeeding',\n      dataValue(\n        '$.form.TT5.Child_Information.Exclusive_Breastfeeding.Exclusive_Breastfeeding'\n      )\n    ),\n    field('Pregnant__c', state => {\n      if (dataValue('$.form.TT5.Mother_Information.Pregnant')(state) == 'Yes')\n        return 1;\n    }),\n    field('Education_Level__c', state => {\n      if (\n        dataValue('$.form.Basic_Information.Record_Type')(state) !== 'Child' &&\n        dataValue('$.form.Basic_Information.Record_Type')(state) !== 'Youth'\n      ) {\n        return dataValue('$.form.Basic_Information.Education_Level')(state)\n          .toString()\n          .replace(/_/g, ' ');\n      }\n    }),\n    field(\n      'Gravida__c',\n      dataValue('$.form.TT5.Mother_Information.Pregnancy_Information.Gravida')\n    ),\n    field(\n      'Parity__c',\n      dataValue('$.form.TT5.Mother_Information.Pregnancy_Information.Parity')\n    ),\n    field(\n      'Unique_Patient_Code__c',\n      dataValue('$.form.HAWI.Unique_Patient_Code')\n    ),\n    field(\n      'Active_in_Support_Group__c',\n      dataValue('$.form.HAWI.Active_in_Support_Group')\n    ),\n    field('Currently_on_ART_s__c', dataValue('$.form.HAWI.ART')),\n    field('ART_Regimen__c', state => {\n      var art = '';\n      var str = dataValue('$.form.HAWI.ARVs')(state);\n      if (str !== undefined) {\n        art = str.replace(/ /g, '; ');\n      }\n      return art;\n    }),\n    field('Preferred_Care_Facility__c', state => {\n      var val = '';\n      if (\n        dataValue('$.form.HAWI.Preferred_Care_Facility')(state) !== undefined\n      ) {\n        val = dataValue('$.form.HAWI.Preferred_Care_Facility')(state)\n          .toString()\n          .replace(/_/g, ' ');\n      }\n      return val;\n    }),\n    field('CommCare_HH_Code__c', dataValue('$.form.case.@case_id')),\n    field(\n      'Child_Status__c',\n      dataValue('$.form.Basic_Information.Child_Status')\n    ),\n    field('Place_of_Delivery__c', state => {\n      var val = '';\n      var placeholder = '';\n      if (\n        dataValue(\n          '$.form.TT5.Child_Information.Delivery_Information.Skilled_Unskilled'\n        )(state) !== undefined\n      ) {\n        placeholder = dataValue(\n          '$.form.TT5.Child_Information.Delivery_Information.Skilled_Unskilled'\n        )(state);\n        if (placeholder == 'Skilled') {\n          val = 'Facility';\n        } else if (placeholder == 'Unskilled') {\n          val = 'Home';\n        }\n      }\n      return val;\n    }),\n    field('Delivery_Facility__c', state => {\n      var val = '';\n      var placeholder = '';\n      if (\n        dataValue(\n          '$.form.TT5.Child_Information.Delivery_Information.Birth_Facility'\n        )(state) !== undefined\n      ) {\n        placeholder = dataValue(\n          '$.form.TT5.Child_Information.Delivery_Information.Birth_Facility'\n        )(state);\n        val = placeholder.toString().replace(/_/g, ' ');\n      }\n      return val;\n    })\n  )\n),\n  create(\n    'Visit__c',\n    fields(\n      relationship(\n        'Household__r',\n        'CommCare_Code__c',\n        dataValue('$.form.case.@case_id')\n      ),\n      field('Household_CHW__c', dataValue('$.form.CHW_ID')),\n      field('Date__c', dataValue('$.metadata.timeEnd')),\n      field('Location__latitude__s', dataValue('$.metadata.location[0]')),\n      field('Location__longitude__s', dataValue('$.metadata.location[1]'))\n    )\n  );\n\n// Your job goes here.// Your job goes here.\n\n")))}s.isMDXComponent=!0},300:function(e,n,a){"use strict";a.d(n,"a",(function(){return f})),a.d(n,"b",(function(){return m}));var t=a(0),r=a.n(t);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function _(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=r.a.createContext({}),s=function(e){var n=r.a.useContext(d),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},f=function(e){var n=s(e.components);return r.a.createElement(d.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},u=r.a.forwardRef((function(e,n){var a=e.components,t=e.mdxType,i=e.originalType,o=e.parentName,d=_(e,["components","mdxType","originalType","parentName"]),f=s(a),u=t,m=f["".concat(o,".").concat(u)]||f[u]||c[u]||i;return a?r.a.createElement(m,l(l({ref:n},d),{},{components:a})):r.a.createElement(m,l({ref:n},d))}));function m(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var _ in n)hasOwnProperty.call(n,_)&&(l[_]=n[_]);l.originalType=e,l.mdxType="string"==typeof e?e:t,o[1]=l;for(var d=2;d<i;d++)o[d]=a[d];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);