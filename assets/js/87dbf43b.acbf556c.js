(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{210:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return _})),a.d(n,"metadata",(function(){return l})),a.d(n,"toc",(function(){return o})),a.d(n,"default",(function(){return f}));var i=a(3),t=a(8),r=(a(0),a(336)),_={title:"Update Person in SF (Sandbox) with salesforce",sidebar_label:"Update Person in SF (Sandbox)",id:"Update Person in SF Sandbox-2017-01-06",keywords:["library","job","expression","salesforce","alterState","create","dataPath","dataValue","each","field","fields","upsert"]},l={unversionedId:"jobs/auto/Update Person in SF Sandbox-2017-01-06",id:"jobs/auto/Update Person in SF Sandbox-2017-01-06",isDocsHomePage:!1,title:"Update Person in SF (Sandbox) with salesforce",description:"This job was provided by an OpenFn.org user via the job library API.",source:"@site/library/jobs/auto/Update Person in SF Sandbox-2017-01-06.md",sourceDirName:"jobs/auto",slug:"/jobs/auto/Update Person in SF Sandbox-2017-01-06",permalink:"/library/jobs/auto/Update Person in SF Sandbox-2017-01-06",version:"current",sidebar_label:"Update Person in SF (Sandbox)",frontMatter:{title:"Update Person in SF (Sandbox) with salesforce",sidebar_label:"Update Person in SF (Sandbox)",id:"Update Person in SF Sandbox-2017-01-06",keywords:["library","job","expression","salesforce","alterState","create","dataPath","dataValue","each","field","fields","upsert"]},sidebar:"library",previous:{title:"Update Person in SF (Production) with salesforce",permalink:"/library/jobs/auto/Update Person in SF Production-2017-05-15"},next:{title:"Pre-processing data with salesforce",permalink:"/library/jobs/auto/alter-state-before-operations"}},o=[{value:"Metadata",id:"metadata",children:[]},{value:"Key Functions",id:"key-functions",children:[]},{value:"Expression",id:"expression",children:[]}],c={toc:o};function f(e){var n=e.components,a=Object(t.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},c,a,{components:n,mdxType:"MDXLayout"}),Object(r.b)("em",null,"This job was provided by an OpenFn.org user via the job library API."),Object(r.b)("h2",{id:"metadata"},"Metadata"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Name: Update Person in SF (Sandbox)"),Object(r.b)("li",{parentName:"ul"},"Adaptor: ",Object(r.b)("inlineCode",{parentName:"li"},"@openfn/language-salesforce")),Object(r.b)("li",{parentName:"ul"},"Adaptor Version: ",Object(r.b)("inlineCode",{parentName:"li"},"v1.3.2")),Object(r.b)("li",{parentName:"ul"},"Created over 4 years ago"),Object(r.b)("li",{parentName:"ul"},"Updated 7 months ago")),Object(r.b)("h2",{id:"key-functions"},"Key Functions"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"alterState"),", ",Object(r.b)("inlineCode",{parentName:"p"},"create"),", ",Object(r.b)("inlineCode",{parentName:"p"},"dataPath"),", ",Object(r.b)("inlineCode",{parentName:"p"},"dataValue"),", ",Object(r.b)("inlineCode",{parentName:"p"},"each"),", ",Object(r.b)("inlineCode",{parentName:"p"},"field"),", ",Object(r.b)("inlineCode",{parentName:"p"},"fields"),", ",Object(r.b)("inlineCode",{parentName:"p"},"upsert")),Object(r.b)("h2",{id:"expression"},"Expression"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"//Deliveries\n\nalterState(state => {\n  if (dataValue('$.form.Status.Client_Status')(state) == 'Active') {\n    //Deliveries\n    if (\n      dataValue('$.form.TT5.Child_Information.Delivery_Information.Delivery')(\n        state\n      ) == 'Yes'\n    ) {\n      if (\n        dataValue(\n          '$.form.TT5.Child_Information.Delivery_Information.Delivery_Type'\n        )(state) == 'Unskilled'\n      ) {\n        return upsert(\n          'Person__c',\n          'CommCare_ID__c',\n          fields(\n            field('Source__c', 1),\n            field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n            field('Name', dataValue('$.form.final_name')),\n            field('Place_of_Delivery__c', dataValue('Home')),\n            field(\n              'Date_of_Birth__c',\n              dataValue('$.form.TT5.Child_Information.Delivery_Information.DOB')\n            ),\n            field('Child_Status__c', 'Born'),\n            field(\n              'Exclusive_Breastfeeding__c',\n              dataValue(\n                'form.TT5.Child_Information.Exclusive_Breastfeeding.Exclusive_Breastfeeding'\n              )\n            )\n          )\n        )(state);\n      } else {\n        //REVIEWED\n        create(\n          'Service__c',\n          fields(\n            field('Source__c', 1),\n            field('Reason_for_Service__c', 'Delivery'),\n            field(\n              'Date__c',\n              dataValue('$.form.TT5.Child_Information.Delivery_Information.DOB')\n            ),\n            field('Type_of_Service__c', 'CHW Mobile Survey'),\n            field('RecordTypeID', '01224000000YAuK'),\n            field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n            relationship(\n              'Person__r',\n              'CommCare_ID__c',\n              dataValue('$.form.case.@case_id')\n            ),\n            relationship(\n              'Site__r',\n              'Label__c',\n              dataValue(\n                '$.form.TT5.Child_Information.Delivery_Information.Delivery_Facility'\n              )\n            )\n          )\n        )(state);\n        upsert(\n          'Person__c',\n          'CommCare_ID__c',\n          fields(\n            field('Source__c', true),\n            field('Child_Status__c', 'Born'),\n            field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n            field('Name', dataValue('$.form.final_name')),\n            field(\n              'Exclusive_Breastfeeding__c',\n              dataValue(\n                'form.TT5.Child_Information.Exclusive_Breastfeeding.Exclusive_Breastfeeding'\n              )\n            )\n          )\n        )(state);\n      }\n    } else {\n      //Name\n      return upsert(\n        'Person__c',\n        'CommCare_ID__c',\n        fields(\n          field('Source__c', true),\n          field(\n            'Telephone__c',\n            dataValue(\n              '$.form.Basic_Information.Basic_Information.final_telephone'\n            )\n          ),\n          field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n          field('Name', dataValue('$.form.final_name')),\n          field(\n            'Exclusive_Breastfeeding__c',\n            dataValue(\n              'form.TT5.Child_Information.Exclusive_Breastfeeding.Exclusive_Breastfeeding'\n            )\n          )\n        )\n      )(state);\n    }\n  }\n  //Transfer Outs REVIEWED\n  else if (\n    dataValue('$.form.Status.Client_Status')(state) == 'Transferred_Out'\n  ) {\n    return upsert(\n      'Person__c',\n      'CommCare_ID__c',\n      fields(\n        field('Source__c', 1),\n        field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n        field('Client_Status__c', 'Transferred Out'),\n        field('Active_in_Thrive_Thru_5__c', 'No'),\n        field('Active_in_HAWI__c', 'No'),\n        field(\n          'Date_of_Transfer_Out__c',\n          dataValue('$.form.Status.Date_of_Transfer_Out')\n        )\n      )\n    )(state);\n  }\n  //Lost to Follow Up REVIEWED\n  else if (\n    dataValue('$.form.Status.Client_Status')(state) == 'Lost_to_Follow-Up'\n  ) {\n    return upsert(\n      'Person__c',\n      'CommCare_ID__c',\n      fields(\n        field('Source__c', 1),\n        field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n        field('Client_Status__c', 'Lost to Follow-Up'),\n        field('Active_in_Thrive_Thru_5__c', 'No'),\n        field('Active_in_HAWI__c', 'No'),\n        field('Date_Last_Seen__c', dataValue('$.form.Status.Date_Last_Seen'))\n      )\n    )(state);\n  }\n  //Data entry error\n  else if (\n    dataValue('$.form.Status.Client_Status')(state) == 'Data_Entry_Error'\n  ) {\n    return upsert(\n      'Person__c',\n      'CommCare_ID__c',\n      fields(\n        field('Source__c', 1),\n        field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n        field('Client_Status__c', 'Data Entry Error'),\n        field('Active_in_Thrive_Thru_5__c', 'No'),\n        field('Active_in_HAWI__c', 'No')\n      )\n    )(state);\n  }\n  //client deceased\n  else if (dataValue('$.form.Status.Client_Status')(state) == 'Deceased') {\n    return upsert(\n      'Person__c',\n      'CommCare_ID__c',\n      fields(\n        field('Source__c', 1),\n        field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n        field('Client_Status__c', 'Deceased'),\n        field('Active_in_Thrive_Thru_5__c', 'No'),\n        field('Active_in_HAWI__c', 'No'),\n        field('Date_of_Death__c', dataValue('$.form.Status.Date_of_Death')),\n        field('Cause_of_Death__c', state => {\n          return dataValue('$.form.Status.Cause_of_Death')(state)\n            .toString()\n            .replace(/_/g, ' ');\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//Need to update CHWs\nalterState(state => {\n  //Both\n  if (\n    dataValue('$.form.Basic_Information.Basic_Information.Add_to_TT5')(state) ==\n    'Yes'\n  ) {\n    return upsert(\n      'Person__c',\n      'CommCare_ID__c',\n      fields(\n        field(\n          'Name',\n          dataValue('$.form.Basic_Information.Basic_Information.final_name')\n        ),\n        field('Source__c', 1),\n        field('Active_TT5_Mother__c', 'Yes'),\n        field('TT5_Mother_Registrant__c', 'Yes'),\n        field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n        field(\n          'Active_in_Support_Group__c',\n          dataValue('$.form.HAWI.Support_Group')\n        ),\n        field(\n          'Preferred_Care_Facility__c',\n          dataValue('$.form.HAWI.Preferred_Care_F.Preferred_Care_Facility')\n        )\n      )\n    )(state);\n  } else {\n    //Both\n    if (\n      dataValue('$.form.Basic_Information.Basic_Information.Add_to_HAWI')(\n        state\n      ) == 'Yes'\n    ) {\n      return upsert(\n        'Person__c',\n        'CommCare_ID__c',\n        fields(\n          field(\n            'Name',\n            dataValue('$.form.Basic_Information.Basic_Information.final_name')\n          ),\n          field('Source__c', 1),\n          field('Active_in_HAWI__c', 'Yes'),\n          field('HAWI_Registrant', 'Yes'),\n          field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n          field(\n            'Active_in_Support_Group__c',\n            dataValue('$.form.HAWI.Support_Group')\n          ),\n          field(\n            'Preferred_Care_Facility__c',\n            dataValue('$.form.HAWI.Preferred_Care_F.Preferred_Care_Facility')\n          ),\n          field(\n            'Exclusive_Breastfeeding__c',\n            dataValue(\n              'form.TT5.Child_Information.Exclusive_Breastfeeding.Exclusive_Breastfeeding'\n            )\n          )\n        )\n      )(state);\n    } else {\n      return upsert(\n        'Person__c',\n        'CommCare_ID__c',\n        fields(\n          field(\n            'Name',\n            dataValue('$.form.Basic_Information.Basic_Information.final_name')\n          ),\n          field('Source__c', 1),\n          field('CommCare_ID__c', dataValue('$.form.case.@case_id')),\n          field(\n            'Active_in_Support_Group__c',\n            dataValue('$.form.HAWI.Support_Group')\n          ),\n          field(\n            'Preferred_Care_Facility__c',\n            dataValue('$.form.HAWI.Preferred_Care_F.Preferred_Care_Facility')\n          ),\n          field(\n            'Exclusive_Breastfeeding__c',\n            dataValue(\n              'form.TT5.Child_Information.Exclusive_Breastfeeding.Exclusive_Breastfeeding'\n            )\n          )\n        )\n      )(state);\n    }\n  }\n});\n\n//ANC1 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.ANCs.copy-1-of-anc_1')(state) ==\n    'click_to_enter_anc_1'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'ANC 1'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('Date__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_1')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.ANCs.Facility1'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//ANC2 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.ANCs.copy-1-of-anc_2')(state) ==\n    'click_to_enter_anc_2'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('Reason_for_Service__c', 'ANC 2'),\n        field('Date__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_2')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.ANCs.Facility2\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.ANCs.Facility2'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//ANC3 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.ANCs.copy-1-of-anc_3')(state) ==\n    'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', true),\n        field('Reason_for_Service__c', 'ANC 3'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('Date__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_3')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.ANCs.Facility3\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.ANCs.Facility3'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//ANC4 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.ANCs.copy-2-of-anc_3')(state) ==\n    'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'ANC 4'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('Date__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_4')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.ANCs.Facility4\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.ANCs.Facility4'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//ANC5 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.ANCs.copy-3-of-anc_3')(state) ==\n    'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'ANC 5'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('Date__c', dataValue('$.form.TT5.Child_Information.ANCs.ANC_5')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.ANCs.Facility5\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.ANCs.Facility5'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//BCG REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-3-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'BCG'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue('$.form.TT5.Child_Information.Immunizations.BCG')\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_BCG\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_BCG'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//OPV0 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.anc_3')(state) ==\n    'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'OPV0'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue('$.form.TT5.Child_Information.Immunizations.OPV_0')\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_OPV_0\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_OPV_0'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//OPV1 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-1-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'OPV1'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue(\n            '$.form.TT5.Child_Information.Immunizations.OPV_PCV_Penta_1'\n          )\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        // relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_OPV_1\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_OPV_1'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//OPV2 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-2-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'OPV2'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue(\n            '$.form.TT5.Child_Information.Immunizations.OPV_PCV_Penta_2'\n          )\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_OPV_2\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_OPV_2'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//OPV3 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-4-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'OPV3'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue(\n            '$.form.TT5.Child_Information.Immunizations.OPV_PCV_Penta_3'\n          )\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_OPV_3\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_OPV_3'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//Measles 6 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-5-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'Measles 6'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue('$.form.TT5.Child_Information.Immunizations.Measles_6')\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_Measles_6\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_Measles_6'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//Measles 9 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-6-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'Measles 9'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue('$.form.TT5.Child_Information.Immunizations.Measles_9')\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_Measles_9\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_Measles_9'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//Measles 18 REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Immunizations.copy-7-of-anc_3')(\n      state\n    ) == 'click_to_enter_anc_3'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'Measles 18'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field(\n          'Date__c',\n          dataValue('$.form.TT5.Child_Information.Immunizations.Measles_18')\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Immunizations.Facility_Measles_18\"))\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Immunizations.Facility_Measles_18'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\nalterState(state => {\n  if (\n    dataValue('$.form.HAWI.Home_Based_Care.Home_Based_Care_Provided')(state) !==\n      undefined &&\n    dataValue('$.form.HAWI.Home_Based_Care.Home_Based_Care_Provided')(state) !==\n      ''\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Reason_for_Service__c', 'Home-Based Care'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('Date__c', dataValue('$.form.Date')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        //field(\"Home_Based_Care_Rendered__c\",'A;B;B'),\n        field('Home_Based_Care_Rendered__c', state => {\n          var care = '';\n          var str = dataValue(\n            '$.form.HAWI.Home_Based_Care.Home_Based_Care_Provided'\n          )(state);\n          care = str.replace(/ /g, ';');\n          care = care.replace(/_/g, ' ');\n\n          return care;\n        }), //NEEDS FIXING\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        )\n      )\n    )(state);\n  }\n  return state;\n});\n\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.CCMM.Home_Test_Result')(state) ==\n    'Positive'\n  ) {\n    //REVIEWED\n    if (\n      dataValue('$.form.TT5.Child_Information.CCMM.Malaria_Referral')(state) ==\n      'Yes'\n    ) {\n      /*create(\"Service__c\", fields(\n        field(\"Source__c\",1),\n        field(\"Date__c\",dataValue(\"$.form.Date\")),\n        field(\"Household_CHW__c\",dataValue(\"$.form.CHW_ID_Final\")),\n        field(\"Referral_Date__c\",dataValue(\"$.form.TT5.Child_Information.CCMM.Home_Treatment_Date\")),\n        field(\"Referred__c\",1),\n        field(\"Type_of_Service__c\",\"CHW Mobile Survey\"),\n        field(\"RecordTypeID\",\"01224000000kOto\"),\n        field(\"Open_Case__c\",1),\n        field(\"Purpose_of_Referral__c\",\"Malaria\"),\n        field(\"Malaria_Status__c\",\"Positive\"),\n        field(\"Home_Treatment_Date__c\",dataValue(\"$.form.TT5.Child_Information.CCMM.Home_Treatment_Date\")),\n        field(\"Malaria_Home_Test_Date__c\",dataValue(\"$.form.TT5.Child_Information.CCMM.Home_Treatment_Date\")),\n        field(\"CommCare_Code__c\",dataValue(\"form.subcase_1.case.@case_id\")(state)),\n        relationship(\"Person__r\",\"CommCare_ID__c\",dataValue(\"$.form.case.@case_id\"))\n        \n      ))(state);*/\n    } else {\n      return create(\n        'Service__c',\n        fields(\n          field('Source__c', 1),\n          field('Date__c', dataValue('$.form.Date')),\n          field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n          field('Type_of_Service__c', 'CHW Mobile Survey'),\n          field('Reason_for_Service__c', 'Malaria (Home Treatment)'),\n          field(\n            'Home_Treatment__c',\n            dataValue('$.form.TT5.Child_Information.CCMM.Home_Treatment')\n          ),\n          field('RecordTypeID', '01224000000kOto'),\n          field('Open_Case__c', 1),\n          field('Malaria_Status__c', 'Positive'),\n          field('Follow_Up_By_Date__c', dataValue('$.form.Follow-Up_By_Date')),\n          field(\n            'Home_Treatment_Date__c',\n            dataValue('$.form.TT5.Child_Information.CCMM.Home_Treatment_Date')\n          ),\n          field(\n            'Malaria_Home_Test_Date__c',\n            dataValue('$.form.TT5.Child_Information.CCMM.Home_Treatment_Date')\n          ),\n          field('CommCare_Code__c', dataValue('form.subcase_1.case.@case_id')),\n          relationship(\n            'Person__r',\n            'CommCare_ID__c',\n            dataValue('$.form.case.@case_id')\n          )\n        )\n      )(state);\n    }\n  }\n  return state;\n});\n\n//REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Nutrition2.Nutrition_Status')(\n      state\n    ) !== undefined\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Date__c', dataValue('$.form.Date')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('RecordTypeID', '01224000000YAuK'),\n        field('Reason_for_Service__c', 'Nutrition Screening'),\n        field(\n          'Clinical_Visit_Date__c',\n          dataValue('$.form.TT5.Child_Information.Nutrition2.Clinical_Date')\n        ),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        ),\n        field(\n          'Height__c',\n          dataValue('$.form.TT5.Child_Information.Nutrition.Height')\n        ),\n        field(\n          'Weight__c',\n          dataValue('$.form.TT5.Child_Information.Nutrition.Weight')\n        ),\n        field(\n          'MUAC__c',\n          dataValue('$.form.TT5.Child_Information.Nutrition.MUAC')\n        ),\n        field('Nutrition_Status__c', state => {\n          var status = '';\n          if (\n            dataValue(\n              '$.form.TT5.Child_Information.Nutrition2.Nutrition_Status'\n            )(state) == 'normal'\n          ) {\n            status = 'Normal';\n          } else if (\n            dataValue(\n              '$.form.TT5.Child_Information.Nutrition2.Nutrition_Status'\n            )(state) == 'moderate'\n          ) {\n            status = 'Moderately Malnourished';\n          } else if (\n            dataValue(\n              '$.form.TT5.Child_Information.Nutrition2.Nutrition_Status'\n            )(state) == 'severe'\n          ) {\n            status = 'Severely Malnourished';\n          }\n          return status;\n        })\n      )\n    )(state);\n  }\n  return state;\n});\n\n//REVIEWED\nalterState(state => {\n  if (dataValue('$.form.Referral')(state) == 'Yes') {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field('Date__c', dataValue('$.form.Date')),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n        field('RecordTypeID', '01224000000kOto'),\n        field('Referred__c', 1),\n        field('Follow_Up_By_Date__c', dataValue('$.form.Follow-Up_By_Date')),\n        field('Reason_for_Service__c', 'Referral'),\n        field('Open_Case__c', 1),\n        field(\n          'Malaria_Status__c',\n          dataValue('form.TT5.Child_Information.CCMM.Home_Test_Result')\n        ),\n        field(\n          'Home_Treatment__c',\n          dataValue('$.form.TT5.Child_Information.CCMM.Home_Treatment')\n        ),\n        field(\n          'Malaria_Home_Test_Date__c',\n          dataValue('$.form.TT5.Child_Information.CCMM.Home_Treatment_Date')\n        ),\n        field(\n          'CommCare_Code__c',\n          dataValue('form.subcase_0.case.@case_id')(state)\n        ),\n        field('Purpose_of_Referral__c', state => {\n          var purpose = '';\n          var name = dataValue('$.form.Purpose_of_Referral')(state);\n          if (name == 'Adverse_Drug_Reaction_Side_Effect') {\n            purpose = 'Adverse Drug Reaction/Side Effect';\n          } else if (name == 'Pregnancy_Care') {\n            purpose = 'Pregnancy Care (ANC)';\n          } else if (name == 'Family_Planning') {\n            purpose = 'Family Planning (FP)';\n          } else {\n            purpose = name.replace(/_/g, ' ');\n          }\n          return purpose;\n        }),\n\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.case.@case_id')\n        )\n      )\n    )(state);\n  }\n  return state;\n});\n\n// REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.HAWI.Clinical_Services_Rendered[0]')(state) !== undefined\n  ) {\n    return beta.each(\n      dataPath('$.form.HAWI.Clinical_Services_Rendered[*]'),\n      create(\n        'Service__c',\n        fields(\n          field('Source__c', 1),\n          field('Household_CHW__c', dataValue('chw')),\n          field('Reason_for_Service__c', state => {\n            var reason = '';\n            var name = dataValue('Purpose')(state);\n            if (name == 'Adverse_Drug_Reaction_Side_Effect') {\n              reason = 'Adverse Drug Reaction/Side Effect';\n            } else if (name == 'Pregnancy_Care') {\n              reason = 'Pregnancy Care (ANC)';\n            } else if (name == 'Family_Planning') {\n              reason = 'Family Planning (FP)';\n            } else {\n              reason = name.replace(/_/g, ' ');\n            }\n            return reason;\n          }),\n          field('Date__c', dataValue('Date_of_Clinical_Service')),\n          field('Type_of_Service__c', 'CHW Mobile Survey'),\n          field('RecordTypeID', '01224000000YAuK'),\n          //relationship(\"Site__r\",\"Label__c\",dataValue(\"Facility_of_Clinical_Service\")),\n          relationship('Site__r', 'Label__c', state => {\n            var facility = dataValue('Facility_of_Clinical_Service')(state);\n            if (facility === '' || facility === undefined) {\n              facility = 'unknown';\n            }\n            return facility;\n          }),\n          relationship('Person__r', 'CommCare_ID__c', dataValue('Case_ID'))\n        )\n      )\n    )(state);\n  } else if (dataValue('$.form.HAWI.Clinical_Service_Q')(state) == 'Yes') {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', 1),\n        field(\n          'Household_CHW__c',\n          dataValue('$.form.HAWI.Clinical_Services_Rendered.chw')\n        ),\n        field('Reason_for_Service__c', state => {\n          var reason = '';\n          var name = dataValue(\n            '$.form.HAWI.Clinical_Services_Rendered.Purpose'\n          )(state);\n          if (name == 'Adverse_Drug_Reaction_Side_Effect') {\n            reason = 'Adverse Drug Reaction/Side Effect';\n          } else if (name == 'Pregnancy_Care') {\n            reason = 'Pregnancy Care (ANC)';\n          } else if (name == 'Family_Planning') {\n            reason = 'Family Planning (FP)';\n          } else {\n            reason = name.replace(/_/g, ' ');\n          }\n          return reason;\n        }),\n        field(\n          'Date__c',\n          dataValue(\n            '$.form.HAWI.Clinical_Services_Rendered.Date_of_Clinical_Service'\n          )\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.HAWI.Clinical_Services_Rendered.Facility_of_Clinical_Service\")),\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.HAWI.Clinical_Services_Rendered.Facility_of_Clinical_Service'\n          )(state);\n          if (facility === '') {\n            facility = 'unknown';\n          }\n          return facility;\n        }),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.HAWI.Clinical_Services_Rendered.Case_ID')\n        )\n      )\n    )(state);\n  }\n  return state;\n});\n\n/*alterState(state =>{\n  if(dataValue(\"$.form.HAWI.Clinical_Service_Q\")(state)==\"Yes\"){\n    \n    create(\"Service__c\", fields(\n      field(\"Source__c\",true),\n      field(\"Household_CHW__c\",dataValue(\"$.form.HAWI.Clinical_Services_Rendered.chw\")),\n      field(\"Reason_for_Service__c\",state =>{\n        var reason='';\n        var name=dataValue(\"$.form.HAWI.Clinical_Services_Rendered.Purpose\")(state);\n        if(name==\"Adverse_Drug_Reaction_Side_Effect\"){\n          reason=\"Adverse Drug Reaction/Side Effect\";\n        }\n        else if(name==\"Pregnancy_Care\"){\n          reason=\"Pregnancy Care (ANC)\";\n        }\n        else if(name==\"Family_Planning\"){\n          reason=\"Family Planning (FP)\"\n        }\n        else{\n          reason=name.replace(/_/g,\" \");\n        }\n        return reason;\n      }),\n      field(\"Date__c\",dataValue(\"$.form.HAWI.Clinical_Services_Rendered.Date_of_Clinical_Service\")),\n      field(\"Type_of_Service__c\",\"CHW Mobile Survey\"),\n      field(\"RecordTypeID\",\"01224000000YAuK\"),\n      //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.HAWI.Clinical_Services_Rendered.Facility_of_Clinical_Service\")),\n      relationship(\"Site__r\",\"Label__c\",state =>{\n        var facility=dataValue(\"$.form.HAWI.Clinical_Services_Rendered.Facility_of_Clinical_Service\")(state);\n        if(facility===''){\n          facility=\"unknown\";\n        }\n        return facility;\n        \n      }),\n      relationship(\"Person__r\",\"CommCare_ID__c\",dataValue(\"$.form.HAWI.Clinical_Services_Rendered.Case_ID\"))\n    \n    ))(state);\n  }\n}),*/\n\n// REVIEWED\nalterState(state => {\n  if (\n    dataValue('$.form.TT5.Child_Information.Clinical_Services[0]')(state) !==\n    undefined\n  ) {\n    return beta.each(\n      dataPath('$.form.TT5.Child_Information.Clinical_Services[*]'),\n      create(\n        'Service__c',\n        fields(\n          field('Source__c', true),\n          field('Household_CHW__c', dataValue('chw')),\n          field('Reason_for_Service__c', state => {\n            var reason = '';\n            var name = dataValue('Purpose')(state);\n            if (name == 'Adverse_Drug_Reaction_Side_Effect') {\n              reason = 'Adverse Drug Reaction/Side Effect';\n            } else if (name == 'Pregnancy_Care') {\n              reason = 'Pregnancy Care (ANC)';\n            } else if (name == 'Family_Planning') {\n              reason = 'Family Planning (FP)';\n            } else {\n              reason = name.replace(/_/g, ' ');\n            }\n            return reason;\n          }),\n          field('Date__c', dataValue('Clinical_Date')),\n          field('Type_of_Service__c', 'CHW Mobile Survey'),\n          field('RecordTypeID', '01224000000YAuK'),\n          //relationship(\"Site__r\",\"Label__c\",dataValue(\"Clinical_Facility\")),\n          relationship('Site__r', 'Label__c', state => {\n            var facility = dataValue('Clinical_Facility')(state);\n            if (facility === '' || facility === undefined) {\n              facility = 'unknown';\n            }\n            return facility;\n          }),\n          relationship('Person__r', 'CommCare_ID__c', dataValue('Case_ID'))\n        )\n      )\n    )(state);\n  } else if (\n    dataValue('$.form.TT5.Child_Information.Clinical_Services_Q')(state) ==\n    'Yes'\n  ) {\n    return create(\n      'Service__c',\n      fields(\n        field('Source__c', true),\n        field(\n          'Household_CHW__c',\n          dataValue('$.form.TT5.Child_Information.Clinical_Services.chw')\n        ),\n        field('Reason_for_Service__c', state => {\n          var reason = '';\n          var name = dataValue(\n            '$.form.TT5.Child_Information.Clinical_Services.Purpose'\n          )(state);\n          if (name == 'Adverse_Drug_Reaction_Side_Effect') {\n            reason = 'Adverse Drug Reaction/Side Effect';\n          } else if (name == 'Pregnancy_Care') {\n            reason = 'Pregnancy Care (ANC)';\n          } else if (name == 'Family_Planning') {\n            reason = 'Family Planning (FP)';\n          } else {\n            reason = name.replace(/_/g, ' ');\n          }\n          return reason;\n        }),\n        field(\n          'Date__c',\n          dataValue(\n            '$.form.TT5.Child_Information.Clinical_Services.Clinical_Date'\n          )\n        ),\n        field('Type_of_Service__c', 'CHW Mobile Survey'),\n        field('RecordTypeID', '01224000000YAuK'),\n        //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Clinical_Services.Clinical_Facility\")),\n        relationship('Site__r', 'Label__c', state => {\n          var facility = dataValue(\n            '$.form.TT5.Child_Information.Clinical_Services.Clinical_Facility'\n          )(state);\n          if (facility === '' || facility === undefined) {\n            facility = 'unknown';\n          }\n          return facility;\n        }),\n        relationship(\n          'Person__r',\n          'CommCare_ID__c',\n          dataValue('$.form.TT5.Child_Information.Clinical_Services.Case_ID')\n        )\n      )\n    )(state);\n  }\n});\n\n/*each(dataPath(\"$.form.TT5.Child_Information.Clinical_Services[*]\"),\n  create(\"Service__c\", fields(\n    field(\"Source__c\",true),\n    field(\"Household_CHW__c\",dataValue(\"chw\")),\n    field(\"Reason_for_Service__c\",state =>{\n      var reason='';\n      var name=dataValue(\"Purpose\")(state);\n      if(name==\"Adverse_Drug_Reaction_Side_Effect\"){\n        reason=\"Adverse Drug Reaction/Side Effect\";\n      }\n      else if(name==\"Pregnancy_Care\"){\n        reason=\"Pregnancy Care (ANC)\";\n      }\n      else if(name==\"Family_Planning\"){\n        reason=\"Family Planning (FP)\"\n      }\n      else{\n        reason=name.replace(/_/g,\" \");\n      }\n      return reason;\n    }),\n    field(\"Date__c\",dataValue(\"Clinical_Date\")),\n    field(\"Type_of_Service__c\",\"CHW Mobile Survey\"),\n    field(\"RecordTypeID\",\"01224000000YAuK\"),\n    //relationship(\"Site__r\",\"Label__c\",dataValue(\"Clinical_Facility\")),\n    relationship(\"Site__r\",\"Label__c\",state =>{\n        var facility=dataValue(\"Clinical_Facility\")(state);\n        if(facility===''||facility===undefined){\n          facility=\"unknown\";\n        }\n        return facility;\n        \n      }),\n    relationship(\"Person__r\",\"CommCare_ID__c\",dataValue(\"Case_ID\"))\n  ))\n),*/\n/*alterState(state =>{\n  if(dataValue(\"$.form.TT5.Child_Information.Clinical_Services_Q\")(state)==\"Yes\"){\n    create(\"Service__c\", fields(\n      field(\"Source__c\",true),\n      field(\"Household_CHW__c\",dataValue(\"$.form.TT5.Child_Information.Clinical_Services.chw\")),\n      field(\"Reason_for_Service__c\",state =>{\n        var reason='';\n        var name=dataValue(\"$.form.TT5.Child_Information.Clinical_Services.Purpose\")(state);\n        if(name==\"Adverse_Drug_Reaction_Side_Effect\"){\n          reason=\"Adverse Drug Reaction/Side Effect\";\n        }\n        else if(name==\"Pregnancy_Care\"){\n          reason=\"Pregnancy Care (ANC)\";\n        }\n        else if(name==\"Family_Planning\"){\n          reason=\"Family Planning (FP)\"\n        }\n        else{\n          reason=name.replace(/_/g,\" \");\n        }\n        return reason;\n      }),\n      field(\"Date__c\",dataValue(\"$.form.TT5.Child_Information.Clinical_Services.Clinical_Date\")),\n      field(\"Type_of_Service__c\",\"CHW Mobile Survey\"),\n      field(\"RecordTypeID\",\"01224000000YAuK\"),\n      //relationship(\"Site__r\",\"Label__c\",dataValue(\"$.form.TT5.Child_Information.Clinical_Services.Clinical_Facility\")),\n      relationship(\"Site__r\",\"Label__c\",state =>{\n        var facility=dataValue(\"$.form.TT5.Child_Information.Clinical_Services.Clinical_Facility\")(state);\n        if(facility===''||facility===undefined){\n          facility=\"unknown\";\n        }\n        return facility;\n        \n      }),\n      relationship(\"Person__r\",\"CommCare_ID__c\",dataValue(\"$.form.TT5.Child_Information.Clinical_Services.Case_ID\"))\n    \n    ))(state);\n  }\n})*/\n\ncreate(\n  'Visit__c',\n  fields(\n    relationship('Household__r', 'CommCare_Code__c', dataValue('$.form.HH_ID')),\n    field('Household_CHW__c', dataValue('$.form.CHW_ID_Final')),\n    field('Date__c', dataValue('$.metadata.timeEnd')),\n    field('Location__latitude__s', dataValue('$.metadata.location[0]')),\n    field('Location__longitude__s', dataValue('$.metadata.location[1]'))\n  )\n);\n\n// Your job goes here.// Your job goes here.\n\n")))}f.isMDXComponent=!0},336:function(e,n,a){"use strict";a.d(n,"a",(function(){return d})),a.d(n,"b",(function(){return m}));var i=a(0),t=a.n(i);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function _(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?_(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,i,t=function(e,n){if(null==e)return{};var a,i,t={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var c=t.a.createContext({}),f=function(e){var n=t.a.useContext(c),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},d=function(e){var n=f(e.components);return t.a.createElement(c.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return t.a.createElement(t.a.Fragment,{},n)}},u=t.a.forwardRef((function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,_=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=f(a),u=i,m=d["".concat(_,".").concat(u)]||d[u]||s[u]||r;return a?t.a.createElement(m,l(l({ref:n},c),{},{components:a})):t.a.createElement(m,l({ref:n},c))}));function m(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=a.length,_=new Array(r);_[0]=u;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:i,_[1]=l;for(var c=2;c<r;c++)_[c]=a[c];return t.a.createElement.apply(null,_)}return t.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);