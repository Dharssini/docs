"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[49183],{15680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>h});var o=n(96540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),g=i,h=u["".concat(p,".").concat(g)]||u[g]||y[g]||r;return n?o.createElement(h,a(a({ref:t},c),{},{components:n})):o.createElement(h,a({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=g;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:i,a[1]=l;for(var s=2;s<r;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},38219:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>y,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var o=n(58168),i=(n(96540),n(15680));const r={title:"Linking Your Project to Github (Version Control)",sidebar_label:"Linking Your Project to Github",slug:"/link-to-Github"},a=void 0,l={unversionedId:"manage-projects/link-to-gh",id:"manage-projects/link-to-gh",title:"Linking Your Project to Github (Version Control)",description:"You can set up version control for your OpenFn projects. This article walks you",source:"@site/docs/manage-projects/link-to-gh.md",sourceDirName:"manage-projects",slug:"/link-to-Github",permalink:"/documentation/link-to-Github",draft:!1,editUrl:"https://github.com/openfn/docs/edit/main/docs/manage-projects/link-to-gh.md",tags:[],version:"current",frontMatter:{title:"Linking Your Project to Github (Version Control)",sidebar_label:"Linking Your Project to Github",slug:"/link-to-Github"},sidebar:"docs",previous:{title:"Email Notifications",permalink:"/documentation/notifications"},next:{title:"Webhook Security",permalink:"/documentation/webhook-security"}},p={},s=[{value:"Setting Up Github Integration",id:"setting-up-github-integration",level:3},{value:"Github Repository Secrets",id:"github-repository-secrets",level:4},{value:"Using Version Control",id:"using-version-control",level:4},{value:"OpenFn to Github",id:"openfn-to-github",level:5},{value:"Github to OpenFn",id:"github-to-openfn",level:5},{value:"Github Repository Structure",id:"github-repository-structure",level:4},{value:"How It Works in a Nutshell",id:"how-it-works-in-a-nutshell",level:3}],c={toc:s},u="wrapper";function y(e){let{components:t,...r}=e;return(0,i.yg)(u,(0,o.A)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("p",null,"You can set up version control for your OpenFn projects. This article walks you\nthrough the configuration steps."),(0,i.yg)("h3",{id:"setting-up-github-integration"},"Setting Up Github Integration"),(0,i.yg)("p",null,"You can connect your OpenFn project to a Github repository that you have\nadministrator access to. This enables a 2-way sync - you can sync your project\nto Github, and you can deploy changes you've made outside of OpenFn to your\nproject."),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"Navigate to ",(0,i.yg)("inlineCode",{parentName:"li"},"Project Settings > Sync to Github")," .")),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Connect to Github",src:n(62678).A,width:"1215",height:"643"})),(0,i.yg)("ol",{start:2},(0,i.yg)("li",{parentName:"ol"},"Select ",(0,i.yg)("inlineCode",{parentName:"li"},"Connect Branch"),". You'll be prompted to sign in to Github.")),(0,i.yg)("p",null,"Click ",(0,i.yg)("inlineCode",{parentName:"p"},"Configure"),"..."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Configure",src:n(54440).A,width:"1263",height:"768"})),(0,i.yg)("ol",{start:3},(0,i.yg)("li",{parentName:"ol"},"...then select the Github account that owns the repository you want to\nconnect to.")),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Install",src:n(99806).A,width:"797",height:"490"})),(0,i.yg)("ol",{start:4},(0,i.yg)("li",{parentName:"ol"},"Select the repository to sync with and hit ",(0,i.yg)("inlineCode",{parentName:"li"},"Save"),".")),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Permissions",src:n(22800).A,width:"902",height:"852"})),(0,i.yg)("ol",{start:5},(0,i.yg)("li",{parentName:"ol"},"You'll be redirected to OpenFn. Select the repository and branch you want to\nsync to."),(0,i.yg)("li",{parentName:"ol"},"The Github sync process makes use of ",(0,i.yg)("inlineCode",{parentName:"li"},"pull")," and ",(0,i.yg)("inlineCode",{parentName:"li"},"deploy")," Github actions to\nsync between your OpenFn project and Github repo (more on these in the\n",(0,i.yg)("inlineCode",{parentName:"li"},"How it works")," section below). In order to do this, a ",(0,i.yg)("inlineCode",{parentName:"li"},"pull.yml")," and a\n",(0,i.yg)("inlineCode",{parentName:"li"},"deploy.yml")," file will be committed to your chosen repository when you\nproceed to connect your branch. If you have files with these names in your\nrepo, they will be overwritten."),(0,i.yg)("li",{parentName:"ol"},"Click ",(0,i.yg)("inlineCode",{parentName:"li"},"Connect Branch"),"."),(0,i.yg)("li",{parentName:"ol"},"Add ",(0,i.yg)("inlineCode",{parentName:"li"},"OPENFN_API_KEY")," and ",(0,i.yg)("inlineCode",{parentName:"li"},"OPENFN_PROJECT_ID")," repository secrets to your\nGithub repo as described below.")),(0,i.yg)("h4",{id:"github-repository-secrets"},"Github Repository Secrets"),(0,i.yg)("p",null,"The workflows that interact with the OpenFn actions will need the repository set\nup with two secrets used in the Github actions. On your Github repo, go to\n",(0,i.yg)("inlineCode",{parentName:"p"},"Settings")," in the top menu. Then on the left, under ",(0,i.yg)("inlineCode",{parentName:"p"},"Security"),", expand the\n",(0,i.yg)("inlineCode",{parentName:"p"},"Secrets and variables")," menu and choose ",(0,i.yg)("inlineCode",{parentName:"p"},"Actions"),". Then click the\n",(0,i.yg)("inlineCode",{parentName:"p"},"New repository secret")," button to add the two below secrets."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Secrets",src:n(56186).A,width:"1607",height:"841"})),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"OPENFN_API_KEY: This is your ",(0,i.yg)("a",{parentName:"li",href:"/documentation/api-tokens"},"API Key"),"] as\ngenerated from OpenFn and will be needed for authentication"),(0,i.yg)("li",{parentName:"ul"},"OPENFN_PROJECT_ID: This is your Project ID from OpenFn. You can copy it from\nthe address bar on your browser, selecting the part after\n",(0,i.yg)("inlineCode",{parentName:"li"},"https://app.openfn.org/projects"),", it will look something like this:\n",(0,i.yg)("inlineCode",{parentName:"li"},"4b31f7td-1130-421p-al39-g8n17doddac7"),". It will be used to pull from the\nOpenFn instance.")),(0,i.yg)("ol",{start:9},(0,i.yg)("li",{parentName:"ol"},"Add a ",(0,i.yg)("inlineCode",{parentName:"li"},"config.json")," file as below to your repository which specifies your\nendpoint and paths to project spec and state files. Both of these files will\nbe automatically created when you first initiate a sync.")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "endpoint": "https://app.openfn.org",\n  "statePath": "./projectState.json",\n  "specPath": "./project.yaml"\n}\n')),(0,i.yg)("ol",{start:10},(0,i.yg)("li",{parentName:"ol"},"Click the sync to Github button to initiate a sync from OpenFn to GitHub.\nOnce it's done, you'll see the new ",(0,i.yg)("inlineCode",{parentName:"li"},"projectState.json")," and ",(0,i.yg)("inlineCode",{parentName:"li"},"project.yaml"),"\nfiles appear on your repo."),(0,i.yg)("li",{parentName:"ol"},"Your GitHub connection is now set up!")),(0,i.yg)("admonition",{type:"info"},(0,i.yg)("p",{parentName:"admonition"},"Make sure you link one Github branch to only one OpenFn project.")),(0,i.yg)("h4",{id:"using-version-control"},"Using Version Control"),(0,i.yg)("h5",{id:"openfn-to-github"},"OpenFn to Github"),(0,i.yg)("p",null,"Each time you want to sync between your project and Github, click the\n",(0,i.yg)("inlineCode",{parentName:"p"},"Initiate Sync to Branch")," button on the version control page and the OpenFn\nGithub app will run a ",(0,i.yg)("inlineCode",{parentName:"p"},"openfn pull")," action to update the versioned\nrepresentation of your project as code."),(0,i.yg)("h5",{id:"github-to-openfn"},"Github to OpenFn"),(0,i.yg)("p",null,"Any time there are changes made to that branch in your Github repo, those\nchanges will be pushed to your OpenFn project. Note that your entire project is\nrepresented in your ",(0,i.yg)("inlineCode",{parentName:"p"},"project.yaml")," file. In order to deploy any changes to\nOpenFn, you have to add them to this file in order for them to be deployed when\nsyncing."),(0,i.yg)("h4",{id:"github-repository-structure"},"Github Repository Structure"),(0,i.yg)("p",null,"Here you can do pretty much what you want, so long as you've got a ",(0,i.yg)("inlineCode",{parentName:"p"},"config.json"),"\npointing to your project spec, state, and OpenFn endpoint."),(0,i.yg)("p",null,"The OpenFn v2 (Lightning) ",(0,i.yg)("a",{parentName:"p",href:"https://demo.openfn.org"},"demo instance")," is currently\nconnected to ",(0,i.yg)("a",{parentName:"p",href:"https://Github.com/OpenFn/demo-openhie/"},"this repo"),". Feel free to\nplay around with it."),(0,i.yg)("h3",{id:"how-it-works-in-a-nutshell"},"How It Works in a Nutshell"),(0,i.yg)("p",null,"Your whole OpenFn project can be represented as a ",(0,i.yg)("inlineCode",{parentName:"p"},"project.yaml")," file."),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"Sync to Github")," feature makes use of Github actions to automatically deploy\n(after a commit) or pull (when ",(0,i.yg)("inlineCode",{parentName:"p"},"Initiate Sync to Branch")," button is clicked) to\nkeep a repository in sync with your OpenFn project."),(0,i.yg)("p",null,"Using our Command Line Interface, the ",(0,i.yg)("a",{parentName:"p",href:"/documentation/deploy/portability"},"@openfn/cli"),"\nyou can pull a project config from OpenFn to a folder or repo on your computer,\nand you can deploy a change in your ",(0,i.yg)("inlineCode",{parentName:"p"},"project.yaml")," file from that directory or\nrepo to OpenFn."),(0,i.yg)("p",null,"For more detailed information on representing your project as code and using the\n@openfn/cli, head over to our documentation on\n",(0,i.yg)("a",{parentName:"p",href:"/documentation/deploy/portability"},"Portability"),"."))}y.isMDXComponent=!0},56186:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/lightning_add_repo_secrets-c4ff1b867ae6c59377f8eec39d9a5aa7.png"},62678:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/lightning_connect_to_gh-d56f618aa497f98e7676a4fba8663d48.png"},54440:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/lightning_gh_configure-5cfed046cf265d2b905d42edcefc7c24.png"},99806:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/lightning_gh_install_openfn-c1ace5102a6d1d214ec5e7e1ed9085a5.png"},22800:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/lightning_gh_permissions-c34aeca93227893baee325e33a1f56e7.png"}}]);