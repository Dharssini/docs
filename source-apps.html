



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="README, Getting Started, Documentation, and Release Notes for OpenFn">
      
      
        <link rel="canonical" href="https://openfn.github.io/docs/source-apps.html">
      
      
        <meta name="author" content="OpenFn">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.3.0">
    
    
      
        <title>Source Apps - OpenFn Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="assets/javascripts/modernizr.962652e9.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:300,400,400i,700|Inconsolata">
        <style>body,input{font-family:"Inconsolata","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Inconsolata","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="customizations.css">
    
    
      
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57118569-4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-57118569-4")</script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="pink">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#standard-webhook-configuration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://openfn.github.io/docs" title="OpenFn Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OpenFn Documentation
              </span>
              <span class="md-header-nav__topic">
                Source Apps
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/OpenFn/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://openfn.github.io/docs" title="OpenFn Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OpenFn Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/OpenFn/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="index.html" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation.html" title="Platform Docs" class="md-nav__link">
      Platform Docs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="release-notes.html" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="core.html" title="Job Execution" class="md-nav__link">
      Job Execution
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Source Apps
      </label>
    
    <a href="source-apps.html" title="Source Apps" class="md-nav__link md-nav__link--active">
      Source Apps
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#standard-webhook-configuration" title="Standard webhook configuration" class="md-nav__link">
    Standard webhook configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commcare-hq" title="CommCare HQ" class="md-nav__link">
    CommCare HQ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#magpi" title="Magpi" class="md-nav__link">
    Magpi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#surveycto" title="SurveyCTO" class="md-nav__link">
    SurveyCTO
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-data-kit-odk-aggregate" title="Open Data Kit (ODK) Aggregate" class="md-nav__link">
    Open Data Kit (ODK) Aggregate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kobo" title="Kobo" class="md-nav__link">
    Kobo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-formsgoogle-sheets" title="Google Forms/Google Sheets" class="md-nav__link">
    Google Forms/Google Sheets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-developers" title="Application Developers" class="md-nav__link">
    Application Developers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-data-to-openfn" title="Sending data to OpenFn" class="md-nav__link">
    Sending data to OpenFn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiving-data-from-openfn" title="Receiving data from OpenFn" class="md-nav__link">
    Receiving data from OpenFn
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#standard-webhook-configuration" title="Standard webhook configuration" class="md-nav__link">
    Standard webhook configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commcare-hq" title="CommCare HQ" class="md-nav__link">
    CommCare HQ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#magpi" title="Magpi" class="md-nav__link">
    Magpi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#surveycto" title="SurveyCTO" class="md-nav__link">
    SurveyCTO
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-data-kit-odk-aggregate" title="Open Data Kit (ODK) Aggregate" class="md-nav__link">
    Open Data Kit (ODK) Aggregate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kobo" title="Kobo" class="md-nav__link">
    Kobo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-formsgoogle-sheets" title="Google Forms/Google Sheets" class="md-nav__link">
    Google Forms/Google Sheets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-developers" title="Application Developers" class="md-nav__link">
    Application Developers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-data-to-openfn" title="Sending data to OpenFn" class="md-nav__link">
    Sending data to OpenFn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiving-data-from-openfn" title="Receiving data from OpenFn" class="md-nav__link">
    Receiving data from OpenFn
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/OpenFn/docs/edit/master/docs/source-apps.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Source Apps</h1>
                
                <h2 id="standard-webhook-configuration">Standard webhook configuration<a class="headerlink" href="#standard-webhook-configuration" title="Permanent link">#</a></h2>
<p>This section describes how to enable push notifications from selected source applications or how to configure pull jobs to fetch data from those sources. If you don't see yours in the alphabetical list below feel free to add it with a pull request.</p>
<p>To connect an application with standard JSON webhooks, copy your inbox
URL from the "Inbox" page or your "Project Settings" screen and use it as the
destination URL on your source application. Unless you have specifically
configured it on the "Access &amp; Security" page, no authentication is required.</p>
<p><strong><em>N.B.: This is by no means an exhaustive list.</em></strong> It is merely a list of common sources that external contributors have added. Remember that anything with a REST api or a JSON-based notification service can be used with OpenFn.</p>
<h2 id="commcare-hq">CommCare HQ<a class="headerlink" href="#commcare-hq" title="Permanent link">#</a></h2>
<ol>
<li>Go to "Project Settings".</li>
<li>Click "Data Forwarding".</li>
<li>"Add a forwarding location" for Cases, Forms, or both.</li>
<li>Specify JSON, using your OpenFn inbox URL as the target. See the <a href="https://confluence.dimagi.com/pages/viewpage.action?pageId=12224128">CommCare documentation</a>.</li>
<li>Create a <a href="https://openfn.github.io/docs/documentation/#match-a-message-with-a-fragment-inside-another-object-called-form">message-filter trigger like this</a>.</li>
<li>Set up a <code>job</code> running on that filter to process CommCare submissions or case updates.</li>
</ol>
<h2 id="magpi">Magpi<a class="headerlink" href="#magpi" title="Permanent link">#</a></h2>
<p>Magpi does not push data to OpenFn. In order to fetch data from Magpi, you must run a job on a timer using <code>langugage-magpi</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nx">fetchSurveyData</span><span class="p">({</span>
  <span class="s2">&quot;surveyId&quot;</span><span class="o">:</span> <span class="mi">37479</span><span class="p">,</span> <span class="c1">// the survey id</span>
  <span class="s2">&quot;afterDate&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-05-31&quot;</span><span class="p">,</span> <span class="c1">// the initial &quot;after&quot; date</span>
  <span class="c1">// after the first run, OpenFn will only fetch new submissions</span>
  <span class="s2">&quot;postUrl&quot;</span><span class="o">:</span> <span class="s2">&quot;https://www.openfn.org/inbox/secret-5c25-inbox-ba2c-url&quot;</span> <span class="c1">// the inbox to post form data to.</span>
<span class="p">});</span>
</pre></div>
</td></tr></table>

<p>Every time this job runs it will only fetch new data, by default.</p>
<h2 id="surveycto">SurveyCTO<a class="headerlink" href="#surveycto" title="Permanent link">#</a></h2>
<p>SurveyCTO does not push data to OpenFn. In order to fetch data from SurveyCTO, you must run a job on a using <code>language-surveycto</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nx">fetchSubmissions</span><span class="p">(</span>
  <span class="s2">&quot;form_id&quot;</span><span class="p">,</span> <span class="c1">// the form id</span>
  <span class="s2">&quot;Sep 1, 2016 3:56:02 PM&quot;</span><span class="p">,</span> <span class="c1">// the initial &quot;after&quot; date</span>
  <span class="c1">// after the first run, OpenFn will only fetch new submissions</span>
  <span class="s2">&quot;https://www.openfn.org/inbox/something-secret&quot;</span> <span class="c1">// the inbox to post form data to.</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Every time this job runs it will only fetch new data, by default.</p>
<h2 id="open-data-kit-odk-aggregate">Open Data Kit (ODK) Aggregate<a class="headerlink" href="#open-data-kit-odk-aggregate" title="Permanent link">#</a></h2>
<ol>
<li>To new submissions from ODK in real-time, click the "Form Management" tab at the top of your Aggregate interface.</li>
<li>Click "Publish" next to the form you'd like to publish to OpenFn.</li>
<li>A dialogue box will open.</li>
<li>In the "Publish To:" picklist, select <code>Z-ALPHA JSON Server</code>.</li>
<li>Choose which data to publish in the "Data to Publish:" picklist. You may: <strong>"Upload Existing Data ONLY"</strong> (ideal for migrations of finished data sets), <strong>"Stream New Submission Data ONLY"</strong> (ideal for new projects), or <strong>"BOTH Upload Existing &amp; Stream New Submission Data"</strong> (ideal for connecting ongoing projects which are already running).</li>
<li>In the "URL to publish to:" text box, enter your OpenFn Inbox UUID. (e.g., <code>https://www.openfn.org/inbox/8ad63a29-mUCh-sEcRET-cODes-wOW</code>)</li>
<li>Leave "Authorization token:" blank.</li>
<li>Leave "Include Media as:" set to "Links(URLs) to Media".</li>
<li>Click "Publish" and enter your email address in the dialogue box.</li>
<li>Click the "Published Data" tab under "Form Management" and select your form to view the status of your publisher. You can also now check your OpenFn inbox to see ODK submissions arrive.</li>
</ol>
<h2 id="kobo">Kobo<a class="headerlink" href="#kobo" title="Permanent link">#</a></h2>
<ol>
<li>To push data from Kobo, users must click the projects icon on their left-side nav bar. It's in the shape of a globe.</li>
<li>Once selecting a project, the <code>Project Settings</code> link will appear at the top left side of the screen. Click it to open the Project Settings page.</li>
<li>In the bottom left pane of the project settings page, users must paste their inbox URL from OpenFn into the <code>Rest Services</code> <code>Service URL</code> input area and select <code>JSON Post</code> as the <code>Service Name</code>.</li>
<li>Click <code>Add Service</code> to start forwarding new Kobo submissions to OpenFn.org.</li>
</ol>
<p>To test to integration, add a submission manually using the <code>enter data in
browser</code> button. Head back to your history page at OpenFn to view the newly
submitted data and write a new <code>filter</code> and <code>job</code> to map your Kobo data to any
destination system on OpenFn.</p>
<p>Here's a sample post from Kobo REST service. Note that questions inside groups
are prefixed with <code>groupname/</code> rather than sitting inside a group object like
ODK: <code>json { "meta/instanceID": "uuid:19d72997-8316-4e02-8016-4a8ddf6a2aa4",
"group1/name": "twenty", "group1/age": "19", "formhub/uuid":
"6f5773a110b046cb97e3d71f6c04e7a6", "first_q": "hello", "final_q": "why not?",
"_xform_id_string": "groups", "_uuid": "19d72997-8316-4e02-8016-4a8ddf6a2aa4",
"_userform_id": "taylordowns2000_groups", "_tags": [], "_submitted_by": null,
"_submission_time": "2016-04-22T06:38:20", "_status": "submitted_via_web",
"_notes": [], "_id": 889409, "_geolocation": [ null, null ],
"_bamboo_dataset_id": "", "_attachments": [] }</code></p>
<h2 id="google-formsgoogle-sheets">Google Forms/Google Sheets<a class="headerlink" href="#google-formsgoogle-sheets" title="Permanent link">#</a></h2>
<p>You can send data to OpenFn whenever a new row is added to a Google Sheet, for
example when a new submission is made to a Google Form. Below is some sample
code you may add to your Google Sheet to make it push data to OpenFn whenever
new rows are added.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">function</span> <span class="nx">sendToOpenFn</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.openfn.org/inbox/your-id-here&#39;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;method&#39;</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
      <span class="s2">&quot;contentType&quot;</span> <span class="o">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
      <span class="s1">&#39;payload&#39;</span><span class="o">:</span> <span class="nx">payload</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">UrlFetchApp</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">isDate</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Date]&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">isNumber</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Number]&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">getReportData</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">bookReportData</span> <span class="o">=</span> <span class="p">{</span><span class="nx">formId</span> <span class="o">:</span> <span class="s2">&quot;bookReport&quot;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]};</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">SpreadsheetApp</span><span class="p">.</span><span class="nx">getActiveSheet</span><span class="p">().</span><span class="nx">getDataRange</span><span class="p">().</span><span class="nx">getValues</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">pageCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">bookRating</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">isDate</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])){</span>        <span class="c1">//  ignore header line</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nx">pageCount</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">6</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nx">bookRating</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span>
      <span class="p">}</span>

      <span class="nx">bookReportData</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
        <span class="p">{</span>
          <span class="nx">Timestamp</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
          <span class="nx">Title</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
          <span class="nx">Author</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
          <span class="nx">NumberOfPages</span> <span class="o">:</span> <span class="nx">pageCount</span><span class="p">,</span>
          <span class="nx">Summary</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">4</span><span class="p">],</span>
          <span class="nx">Protagonist</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">5</span><span class="p">],</span>
          <span class="nx">Rating</span> <span class="o">:</span> <span class="nx">bookRating</span><span class="p">,</span>
          <span class="nx">EmailTeacher</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">7</span><span class="p">],</span>
          <span class="nx">EmailStudent</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">8</span><span class="p">],</span>
          <span class="nx">SendStatus</span> <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">9</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="c1">//  Logger.log(bookReportData);</span>

  <span class="nx">sendToOpenFn</span><span class="p">(</span><span class="nx">bookReportData</span><span class="p">);</span>  
<span class="p">}</span>
</pre></div>
</td></tr></table>

<h2 id="application-developers">Application Developers<a class="headerlink" href="#application-developers" title="Permanent link">#</a></h2>
<p>This section is for you if you are hoping to build or extend an existing application that can connect to OpenFn. We follow modern web-standard JSON api guidelines.</p>
<p>For your application to a be data provider (or "source") for OpenFn integrations, we highly recommend that you create a "notifications service" (sometimes called a "webhooks service" or "event-based push API"). This is preferrable to using a REST api for two reasons: (1) A notifications service will give your clients the ability to set up real-time integrations, and (2) a notifications service is more efficient for both your servers and OpenFn—instead of having requests be made and handled every X seconds, your servers and OpenFn's servers will only work when new data is available.</p>
<p>For your appliation to be a consumer (or "destination") for OpenFn, you must either have a standard, JSON-based rest API or create a language-package that meets your API specifications.</p>
<h3 id="sending-data-to-openfn">Sending data to OpenFn<a class="headerlink" href="#sending-data-to-openfn" title="Permanent link">#</a></h3>
<p>To send data to OpenFn, your application must be able to make an HTTPS post to an external URL with a valid JSON object as the post body. See the following example using cURL:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>curl -X POST \
  -H &quot;Content-Type: application/json&quot; \
  -H &quot;Cache-Control: no-cache&quot; \
  -d &#39;{&quot;foo&quot;:&quot;bar&quot;, &quot;baz&quot;:&quot;qux&quot;}&#39; \
  &quot;https://staging.openfn.org/inbox/some-secret-api-key&quot;
</pre></div>
</td></tr></table>

<p>OpenFn will respond with a 200 and an empty JSON object in the event of a successful post. 400s mean that the user's external URL is wrong, and 500s means that there is an application error on OpenFn. While 500s are rare, they could be due to invalid JSON in your POST body.</p>
<p>If you cannot notifiy an external URL when some event takes place, you can still integrate with OpenFn if you have a JSON-based REST API. OpenFn users can make HTTP GET requests to your application and perform additional actions based on your response. You should allow either basic or token authentication and responsd to a valid GET with JSON. There is no specific format for your response, as users can parse it any way they'd like, extracting relevant data and then performing other actions—like loading it into a destination system—with that data. See <a href="https://www.github.com/openfn/language-http">language-http</a> for details on how users make these generic HTTP requests.</p>
<h3 id="receiving-data-from-openfn">Receiving data from OpenFn<a class="headerlink" href="#receiving-data-from-openfn" title="Permanent link">#</a></h3>
<p>To make it easy for users to connect to your application, it's highly recommended that you create a language-package with your required authentication and a set of simple, allowable actions nicely abstracted into "helper functions". See <a href="https://www.github.com/openfn/language-dhis2">language-dhis2</a> for an example of a language-package which creates a simpler interface for a traditional JSON-based REST api. Language packages are written in Javascript and execute in Node. You can convert OpenFn's JSON into XML, or any other format before sending it to your application and you may make use of any node modules you'd like. See <a href="https://www.github.com/openfn/language-postgresql">language-postgresql</a> for an example of a language package that connects directly to PostgreSQL databases using a popular NPM module called "pg".</p>
<p>To receive data from OpenFn's generic language-http langauge package, your application must allow either basic, token, or digest authenticated POST, PUT, or GET requests. (Though it is not advisable to create an API that requires GET requests to create or update data.)</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="core.html" title="Job Execution" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Job Execution
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (c) 2019 Open Function Group LLC
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="assets/fonts/font-awesome.css">
    
      <a href="https://github.com/openfn" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://facebook.com/openfn" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://twitter.com/openfn" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/openfn" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.a353778b.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>